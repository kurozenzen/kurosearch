import{s as ne,f as C,a as j,l as x,g as I,h as A,d as m,c as N,m as ee,j as g,r as _n,i as F,u as h,v as K,y as ae,w as Ie,H as Ye,I as gn,J as We,x as X,n as $e,p as he,K as je,A as Z,L as Fe,M as Ve,D as Ce,N as xe,O as Ze,o as tt,P as nt,C as mn,E as hn,F as vn,G as $n,Q as at,R as bn,S as kn,e as Ae,T as wn,k as Re,B as yn,z as En}from"../chunks/scheduler.51196a30.js";import{S as se,i as le,b as O,d as V,m as B,a as S,t as D,e as M,f as Ne,g as _e,c as ge}from"../chunks/index.456a70cf.js";import{g as Sn}from"../chunks/globals.7f7f1b26.js";import{b as Wt}from"../chunks/paths.52a58eec.js";import{T as Ue}from"../chunks/TextButton.755fe16a.js";import{a as et,r as Je,B as Cn}from"../chunks/blocking-group-data.5e4f115e.js";import{a as Qe}from"../chunks/active-tags-store.c9bbda04.js";import{f as Oe}from"../chunks/format-tag.7e313273.js";import{s as Xe,f as Ke,S as In}from"../chunks/url-parsing.55bc59a5.js";import{N as Tn,a as Jt,b as Dn,o as Ln}from"../chunks/tags-shortcut-store.8ac72bbc.js";import{e as be}from"../chunks/each.e59479a4.js";import{D as Qt,a as Yt,r as Zt}from"../chunks/result-columns-store.81b90c74.js";import{R as Pn,I as Xt}from"../chunks/ModifierSelect.387d0c9e.js";import{S as jn}from"../chunks/Select.f18a4a29.js";import{R as Nn}from"../chunks/RotatingTextSelect.f3649d7e.js";import{R as Rn,S as xt,a as en,E as tn,b as Fn,C as nn,P as sn,g as ln,f as pt,r as An,c as On,i as Vn,d as Bn,G as Mn,V as zn,e as mt,h as qn}from"../chunks/PreviewedImage.e7310b78.js";import{h as ht,u as Hn}from"../chunks/await_block.dd2b1fe4.js";import{L as _t}from"../chunks/LoadingAnimation.5056bbea.js";import{h as Un,i as Gn,a as Kn}from"../chunks/always-loop-store.131f0dba.js";import{p as Wn,S as Jn,b as Qn,a as Yn}from"../chunks/store-keys.4d5921a5.js";import{i as Zn,a as rn,u as on,g as Xn,b as xn}from"../chunks/user-id-store.66fd1ad4.js";import{b as an}from"../chunks/blocked-content-store.0bef0832.js";import{S as es}from"../chunks/ScrollUpButton.e0a4a414.js";import{l as ts}from"../chunks/analytics.b280da65.js";/* empty css                                                       */import{K as ns,A as ss}from"../chunks/ActiveTagList.23fa9778.js";import{S as ls}from"../chunks/Searchbar.c3373a7c.js";import{s as vt,n as rs}from"../chunks/supertags-store.0aed9372.js";import{D as os}from"../chunks/DetailedTag.82d62b9a.js";function is(s){let e,n,t,l,o,r,a,i,c,u;return{c(){e=C("div"),n=C("div"),t=C("i"),l=j(),o=C("div"),r=C("h3"),a=x(s[0]),i=j(),c=C("span"),u=x(s[2]),this.h()},l(f){e=I(f,"DIV",{class:!0});var _=A(e);n=I(_,"DIV",{class:!0});var v=A(n);t=I(v,"I",{class:!0}),A(t).forEach(m),v.forEach(m),l=N(_),o=I(_,"DIV",{});var d=A(o);r=I(d,"H3",{class:!0});var p=A(r);a=ee(p,s[0]),p.forEach(m),i=N(d),c=I(d,"SPAN",{});var k=A(c);u=ee(k,s[2]),k.forEach(m),d.forEach(m),_.forEach(m),this.h()},h(){g(t,"class",_n(s[1])+" svelte-1yohziu"),g(n,"class","icon svelte-1yohziu"),g(r,"class","svelte-1yohziu"),g(e,"class","error svelte-1yohziu")},m(f,_){F(f,e,_),h(e,n),h(n,t),h(e,l),h(e,o),h(o,r),h(r,a),h(o,i),h(o,c),h(c,u)},p:K,i:K,o:K,d(f){f&&m(e)}}}function as(s,e,n){let{error:t}=e,l=t.message==="Failed to fetch"?"Connection Error":"Application Error",o=t.message==="Failed to fetch"?"codicon codicon-debug-disconnect":"codicon codicon-error",r=t.message==="Failed to fetch"?"Failed to connect to the server. Make sure you have a stable internet connection.":t.message;return s.$$set=a=>{"error"in a&&n(3,t=a.error)},[l,o,r,t]}class cs extends se{constructor(e){super(),le(this,e,as,is,ne,{error:3})}}function us(s){let e;return{c(){e=x("Back to Top")},l(n){e=ee(n,"Back to Top")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function fs(s){let e;return{c(){e=x("Reset Tags")},l(n){e=ee(n,"Reset Tags")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function ps(s){let e,n,t,l,o,r="You have seen everything there is to see...",a,i,c,u,f,_;return c=new Ue({props:{type:"secondary",title:"Scroll back up.",$$slots:{default:[us]},$$scope:{ctx:s}}}),c.$on("click",s[0]),f=new Ue({props:{type:"secondary",title:"Reset tags.",$$slots:{default:[fs]},$$scope:{ctx:s}}}),f.$on("click",s[1]),{c(){e=C("section"),n=C("img"),l=j(),o=C("p"),o.textContent=r,a=j(),i=C("div"),O(c.$$.fragment),u=j(),O(f.$$.fragment),this.h()},l(v){e=I(v,"SECTION",{class:!0});var d=A(e);n=I(d,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=N(d),o=I(d,"P",{"data-svelte-h":!0}),ae(o)!=="svelte-1i75mtf"&&(o.textContent=r),a=N(d),i=I(d,"DIV",{class:!0});var p=A(i);V(c.$$.fragment,p),u=N(p),V(f.$$.fragment,p),p.forEach(m),d.forEach(m),this.h()},h(){Ie(n.src,t=Wt+"/assets/lynxy-chibi-not-found.webp")||g(n,"src",t),g(n,"alt","No more results to load"),g(n,"width","1231"),g(n,"height","864"),g(n,"class","svelte-1b36daw"),g(i,"class","svelte-1b36daw"),g(e,"class","svelte-1b36daw")},m(v,d){F(v,e,d),h(e,n),h(e,l),h(e,o),h(e,a),h(e,i),B(c,i,null),h(i,u),B(f,i,null),_=!0},p(v,[d]){const p={};d&4&&(p.$$scope={dirty:d,ctx:v}),c.$set(p);const k={};d&4&&(k.$$scope={dirty:d,ctx:v}),f.$set(k)},i(v){_||(S(c.$$.fragment,v),S(f.$$.fragment,v),_=!0)},o(v){D(c.$$.fragment,v),D(f.$$.fragment,v),_=!1},d(v){v&&m(e),M(c),M(f)}}}function ds(s){return[()=>{window.scrollTo({top:0})},()=>{Qe.reset(),et.reset()}]}class _s extends se{constructor(e){super(),le(this,e,ds,ps,ne,{})}}function $t(s,e,n){const t=s.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function bt(s){let e,n,t,l=!1,o,r,a,i=s[6]+"",c,u,f,_,v;return f=gn(s[4][0]),{c(){e=C("input"),r=j(),a=C("label"),c=x(i),this.h()},l(d){e=I(d,"INPUT",{type:!0,name:!0,id:!0,class:!0}),r=N(d),a=I(d,"LABEL",{for:!0,class:!0});var p=A(a);c=ee(p,i),p.forEach(m),this.h()},h(){g(e,"type","radio"),g(e,"name",n="group-"+s[1]),e.__value=t=s[5],We(e,e.__value),g(e,"id",o=s[1]+"-"+s[5]),g(e,"class","svelte-16oxivo"),g(a,"for",u=s[1]+"-"+s[5]),g(a,"class","svelte-16oxivo"),f.p(e)},m(d,p){F(d,e,p),e.checked=e.__value===s[0],F(d,r,p),F(d,a,p),h(a,c),_||(v=X(e,"change",s[3]),_=!0)},p(d,p){p&2&&n!==(n="group-"+d[1])&&g(e,"name",n),p&4&&t!==(t=d[5])&&(e.__value=t,We(e,e.__value),l=!0),p&6&&o!==(o=d[1]+"-"+d[5])&&g(e,"id",o),(l||p&5)&&(e.checked=e.__value===d[0]),p&4&&i!==(i=d[6]+"")&&$e(c,i),p&6&&u!==(u=d[1]+"-"+d[5])&&g(a,"for",u)},d(d){d&&(m(e),m(r),m(a)),f.r(),_=!1,v()}}}function gs(s){let e,n,t=be(Object.entries(s[2])),l=[];for(let o=0;o<t.length;o+=1)l[o]=bt($t(s,t,o));return{c(){e=C("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=I(o,"DIV",{id:!0,role:!0,class:!0});var r=A(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(m),this.h()},h(){g(e,"id",n="group-"+s[1]),g(e,"role","radiogroup"),g(e,"class","svelte-16oxivo")},m(o,r){F(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(o,[r]){if(r&7){t=be(Object.entries(o[2]));let a;for(a=0;a<t.length;a+=1){const i=$t(o,t,a);l[a]?l[a].p(i,r):(l[a]=bt(i),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}r&2&&n!==(n="group-"+o[1])&&g(e,"id",n)},i:K,o:K,d(o){o&&m(e),Ye(l,o)}}}function ms(s,e,n){let{name:t}=e,{value:l}=e,{options:o}=e;const r=[[]];function a(){l=this.__value,n(0,l)}return s.$$set=i=>{"name"in i&&n(1,t=i.name),"value"in i&&n(0,l=i.value),"options"in i&&n(2,o=i.options)},[l,t,o,a,r]}class hs extends se{constructor(e){super(),le(this,e,ms,gs,ne,{name:1,value:0,options:2})}}const vs=Object.freeze({id:{asc:"Oldest",desc:"Newest"},score:{asc:"Worst",desc:"Best"},updated:{asc:"Inactive",desc:"Active"},random:{asc:"Random",desc:"Random"}}),cn=Object.freeze({">=":"≥","<=":"≤"}),un=Object.freeze({all:"All",safe:"Safe",questionable:"Questionable",explicit:"Explicit"}),$s=Object.freeze({id:"Uploaded",score:"Score",updated:"Updated",random:"Random"}),bs=Object.freeze({desc:"codicon codicon-arrow-down",asc:"codicon codicon-arrow-up"}),ks=(s,e)=>s===0&&e===">="?void 0:`Score ${cn[e]} ${Oe(s)}`,ws=s=>s==="all"?void 0:un[s],ys=(s,e,n)=>{let t=ws(s),l=ks(e,n);return[t,l].filter(o=>o!==void 0).join(",")||"All"},Es=(s,e)=>vs[s][e];function Ss(s){let e;return{c(){e=x("Done")},l(n){e=ee(n,"Done")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Cs(s){let e;return{c(){e=x("Reset")},l(n){e=ee(n,"Reset")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Is(s){let e,n,t,l="Sorting and Filtering",o,r,a,i,c,u,f,_="Sorting",v,d,p,k,L,y,E,$,b,w,R="Filtering by Score",T,P,q,J,fe,pe,ue,Y,te,U,W="Rating",oe,Q,ke,we,ve,Ee,Le,Ge,Pe,st;function ct(z){s[5](z)}let Te={options:bs};s[1].direction!==void 0&&(Te.value=s[1].direction),p=new Pn({props:Te}),he.push(()=>Ne(p,"value",ct));function lt(z){s[6](z)}let Be={options:$s};s[1].property!==void 0&&(Be.value=s[1].property),y=new jn({props:Be}),he.push(()=>Ne(y,"value",lt));function ft(z){s[7](z)}let rt={options:cn};s[2].scoreComparator!==void 0&&(rt.value=s[2].scoreComparator),q=new Nn({props:rt}),he.push(()=>Ne(q,"value",ft));function Me(z){s[8](z)}let ze={min:0,max:1e4,step:1};s[2].scoreValue!==void 0&&(ze.value=s[2].scoreValue),pe=new Tn({props:ze}),he.push(()=>Ne(pe,"value",Me));function ce(z){s[9](z)}let qe={name:"rating",options:un};return s[2].rating!==void 0&&(qe.value=s[2].rating),Q=new hs({props:qe}),he.push(()=>Ne(Q,"value",ce)),ve=new Ue({props:{title:"Return to searching",$$slots:{default:[Ss]},$$scope:{ctx:s}}}),ve.$on("click",s[3]),Le=new Ue({props:{title:"Reset sort and filter",type:"secondary",$$slots:{default:[Cs]},$$scope:{ctx:s}}}),Le.$on("click",s[4]),{c(){e=C("div"),n=C("div"),t=C("h3"),t.textContent=l,o=j(),r=C("div"),a=j(),i=C("button"),c=j(),u=C("div"),f=C("b"),f.textContent=_,v=j(),d=C("div"),O(p.$$.fragment),L=j(),O(y.$$.fragment),$=j(),b=C("div"),w=C("b"),w.textContent=R,T=j(),P=C("div"),O(q.$$.fragment),fe=j(),O(pe.$$.fragment),Y=j(),te=C("div"),U=C("b"),U.textContent=W,oe=j(),O(Q.$$.fragment),we=j(),O(ve.$$.fragment),Ee=j(),O(Le.$$.fragment),this.h()},l(z){e=I(z,"DIV",{class:!0});var re=A(e);n=I(re,"DIV",{class:!0});var H=A(n);t=I(H,"H3",{"data-svelte-h":!0}),ae(t)!=="svelte-15zouq3"&&(t.textContent=l),o=N(H),r=I(H,"DIV",{class:!0}),A(r).forEach(m),a=N(H),i=I(H,"BUTTON",{type:!0,class:!0}),A(i).forEach(m),H.forEach(m),c=N(re),u=I(re,"DIV",{});var G=A(u);f=I(G,"B",{class:!0,"data-svelte-h":!0}),ae(f)!=="svelte-ekzpgg"&&(f.textContent=_),v=N(G),d=I(G,"DIV",{class:!0});var de=A(d);V(p.$$.fragment,de),L=N(de),V(y.$$.fragment,de),de.forEach(m),G.forEach(m),$=N(re),b=I(re,"DIV",{});var Se=A(b);w=I(Se,"B",{class:!0,"data-svelte-h":!0}),ae(w)!=="svelte-1flca3"&&(w.textContent=R),T=N(Se),P=I(Se,"DIV",{class:!0});var ie=A(P);V(q.$$.fragment,ie),fe=N(ie),V(pe.$$.fragment,ie),ie.forEach(m),Se.forEach(m),Y=N(re),te=I(re,"DIV",{});var De=A(te);U=I(De,"B",{class:!0,"data-svelte-h":!0}),ae(U)!=="svelte-1lwyn2b"&&(U.textContent=W),oe=N(De),V(Q.$$.fragment,De),De.forEach(m),we=N(re),V(ve.$$.fragment,re),Ee=N(re),V(Le.$$.fragment,re),re.forEach(m),this.h()},h(){g(r,"class","spacer svelte-nizkv3"),g(i,"type","button"),g(i,"class","codicon codicon-close svelte-nizkv3"),g(n,"class","row svelte-nizkv3"),g(f,"class","svelte-nizkv3"),g(d,"class","row svelte-nizkv3"),g(w,"class","svelte-nizkv3"),g(P,"class","row svelte-nizkv3"),g(U,"class","svelte-nizkv3"),g(e,"class","container svelte-nizkv3")},m(z,re){F(z,e,re),h(e,n),h(n,t),h(n,o),h(n,r),h(n,a),h(n,i),h(e,c),h(e,u),h(u,f),h(u,v),h(u,d),B(p,d,null),h(d,L),B(y,d,null),h(e,$),h(e,b),h(b,w),h(b,T),h(b,P),B(q,P,null),h(P,fe),B(pe,P,null),h(e,Y),h(e,te),h(te,U),h(te,oe),B(Q,te,null),h(e,we),B(ve,e,null),h(e,Ee),B(Le,e,null),Ge=!0,Pe||(st=X(i,"click",s[3]),Pe=!0)},p(z,re){const H={};!k&&re&2&&(k=!0,H.value=z[1].direction,je(()=>k=!1)),p.$set(H);const G={};!E&&re&2&&(E=!0,G.value=z[1].property,je(()=>E=!1)),y.$set(G);const de={};!J&&re&4&&(J=!0,de.value=z[2].scoreComparator,je(()=>J=!1)),q.$set(de);const Se={};!ue&&re&4&&(ue=!0,Se.value=z[2].scoreValue,je(()=>ue=!1)),pe.$set(Se);const ie={};!ke&&re&4&&(ke=!0,ie.value=z[2].rating,je(()=>ke=!1)),Q.$set(ie);const De={};re&4096&&(De.$$scope={dirty:re,ctx:z}),ve.$set(De);const me={};re&4096&&(me.$$scope={dirty:re,ctx:z}),Le.$set(me)},i(z){Ge||(S(p.$$.fragment,z),S(y.$$.fragment,z),S(q.$$.fragment,z),S(pe.$$.fragment,z),S(Q.$$.fragment,z),S(ve.$$.fragment,z),S(Le.$$.fragment,z),Ge=!0)},o(z){D(p.$$.fragment,z),D(y.$$.fragment,z),D(q.$$.fragment,z),D(pe.$$.fragment,z),D(Q.$$.fragment,z),D(ve.$$.fragment,z),D(Le.$$.fragment,z),Ge=!1},d(z){z&&m(e),M(p),M(y),M(q),M(pe),M(Q),M(ve),M(Le),Pe=!1,st()}}}function Ts(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[Is]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.dialog=s[0]),e=new Qt({props:o}),he.push(()=>Ne(e,"dialog",l)),e.$on("close",s[11]),{c(){O(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){B(e,r,a),t=!0},p(r,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:r}),!n&&a&1&&(n=!0,i.dialog=r[0],je(()=>n=!1)),e.$set(i)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function Ds(s,e,n){let t,l;Z(s,Xe,p=>n(1,t=p)),Z(s,Ke,p=>n(2,l=p));let{dialog:o}=e;const r=()=>o.close(),a=()=>{Xe.reset(),Ke.reset()};function i(p){s.$$.not_equal(t.direction,p)&&(t.direction=p,Xe.set(t))}function c(p){s.$$.not_equal(t.property,p)&&(t.property=p,Xe.set(t))}function u(p){s.$$.not_equal(l.scoreComparator,p)&&(l.scoreComparator=p,Ke.set(l))}function f(p){s.$$.not_equal(l.scoreValue,p)&&(l.scoreValue=p,Ke.set(l))}function _(p){s.$$.not_equal(l.rating,p)&&(l.rating=p,Ke.set(l))}function v(p){o=p,n(0,o)}function d(p){Fe.call(this,s,p)}return s.$$set=p=>{"dialog"in p&&n(0,o=p.dialog)},[o,t,l,r,a,i,c,u,f,_,v,d]}class Ls extends se{constructor(e){super(),le(this,e,Ds,Ts,ne,{dialog:0})}}function Ps(s){let e,n,t,l,o,r,a,i,c,u,f,_,v,d,p,k;function L(E){s[9](E)}let y={};return s[2]!==void 0&&(y.dialog=s[2]),_=new Ls({props:y}),he.push(()=>Ne(_,"dialog",L)),_.$on("close",s[10]),{c(){e=C("button"),n=C("i"),t=j(),l=C("span"),o=x(s[5]),r=j(),a=C("i"),i=j(),c=C("span"),u=x(s[4]),f=j(),O(_.$$.fragment),this.h()},l(E){e=I(E,"BUTTON",{type:!0,class:!0});var $=A(e);n=I($,"I",{class:!0}),A(n).forEach(m),t=N($),l=I($,"SPAN",{class:!0});var b=A(l);o=ee(b,s[5]),b.forEach(m),r=N($),a=I($,"I",{class:!0}),A(a).forEach(m),i=N($),c=I($,"SPAN",{class:!0});var w=A(c);u=ee(w,s[4]),w.forEach(m),$.forEach(m),f=N(E),V(_.$$.fragment,E),this.h()},h(){g(n,"class","codicon codicon-filter svelte-3ooqm6"),g(l,"class","svelte-3ooqm6"),g(a,"class","codicon codicon-arrow-swap svelte-3ooqm6"),g(c,"class","svelte-3ooqm6"),g(e,"type","button"),g(e,"class","svelte-3ooqm6")},m(E,$){F(E,e,$),h(e,n),h(e,t),h(e,l),h(l,o),h(e,r),h(e,a),h(e,i),h(e,c),h(c,u),F(E,f,$),B(_,E,$),d=!0,p||(k=X(e,"click",s[8]),p=!0)},p(E,[$]){(!d||$&32)&&$e(o,E[5]),(!d||$&16)&&$e(u,E[4]);const b={};!v&&$&4&&(v=!0,b.dialog=E[2],je(()=>v=!1)),_.$set(b)},i(E){d||(S(_.$$.fragment,E),d=!0)},o(E){D(_.$$.fragment,E),d=!1},d(E){E&&(m(e),m(f)),M(_,E),p=!1,k()}}}function js(s,e,n){let t,l,o,r;Z(s,Xe,d=>n(0,o=d)),Z(s,Ke,d=>n(1,r=d));const a=Ve(),i=(d,p)=>JSON.stringify(Object.assign({},d,p));let c,u="";const f=()=>{n(3,u=i(o,r)),c.showModal(),Yt("dialog")};function _(d){c=d,n(2,c)}const v=()=>{i(o,r)!==u&&a("sortfilterupdate")};return s.$$.update=()=>{s.$$.dirty&2&&n(5,t=ys(r.rating,r.scoreValue,r.scoreComparator)),s.$$.dirty&1&&n(4,l=Es(o.property,o.direction))},[o,r,c,u,l,t,a,i,f,_,v]}class Ns extends se{constructor(e){super(),le(this,e,js,Ps,ne,{})}}function Rs(s){let e,n,t=Oe(s[1].postCount)+"",l,o,r,a,i;return a=new Ns({}),a.$on("sortfilterupdate",s[2]),{c(){e=C("div"),n=C("span"),l=x(t),o=x(" posts"),r=j(),O(a.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0});var u=A(e);n=I(u,"SPAN",{class:!0});var f=A(n);l=ee(f,t),o=ee(f," posts"),f.forEach(m),r=N(u),V(a.$$.fragment,u),u.forEach(m),this.h()},h(){g(n,"class","svelte-1f1ky2c"),Ce(n,"loading",s[0]),g(e,"class","svelte-1f1ky2c")},m(c,u){F(c,e,u),h(e,n),h(n,l),h(n,o),h(e,r),B(a,e,null),i=!0},p(c,[u]){(!i||u&2)&&t!==(t=Oe(c[1].postCount)+"")&&$e(l,t),(!i||u&1)&&Ce(n,"loading",c[0])},i(c){i||(S(a.$$.fragment,c),i=!0)},o(c){D(a.$$.fragment,c),i=!1},d(c){c&&m(e),M(a)}}}function Fs(s,e,n){let t;Z(s,Je,r=>n(1,t=r));let{loading:l}=e;function o(r){Fe.call(this,s,r)}return s.$$set=r=>{"loading"in r&&n(0,l=r.loading)},[l,t,o]}class As extends se{constructor(e){super(),le(this,e,Fs,Rs,ne,{loading:0})}}const ut=s=>`post_${s}`;function kt(s){let e;const n=s[4].default,t=mn(n,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&hn(t,n,l,l[3],e?$n(n,l[3],o,null):vn(l[3]),null)},i(l){e||(S(t,l),e=!0)},o(l){D(t,l),e=!1},d(l){t&&t.d(l)}}}function Os(s){let e,n,t,l,o=s[1]&&kt(s);return{c(){e=C("div"),o&&o.c(),this.h()},l(r){e=I(r,"DIV",{role:!0,tabindex:!0,class:!0});var a=A(e);o&&o.l(a),a.forEach(m),this.h()},h(){g(e,"role","none"),g(e,"tabindex","-1"),g(e,"class","svelte-6sy8qz")},m(r,a){F(r,e,a),o&&o.m(e,null),s[5](e),n=!0,t||(l=[X(e,"click",xe(Vs)),X(e,"keydown",s[2])],t=!0)},p(r,[a]){r[1]?o?(o.p(r,a),a&2&&S(o,1)):(o=kt(r),o.c(),S(o,1),o.m(e,null)):o&&(_e(),D(o,1,1,()=>{o=null}),ge())},i(r){n||(S(o),n=!0)},o(r){D(o),n=!1},d(r){r&&m(e),o&&o.d(),s[5](null),t=!1,Ze(l)}}}const Vs=()=>{};function Bs(s,e,n){let{$$slots:t={},$$scope:l}=e;const o=Ve(),r=()=>o("close"),a=_=>{_.key==="Escape"&&r()},i=()=>{document.fullscreenElement||r()};let c,u=!1;tt(async()=>{c.focus(),document.addEventListener("fullscreenchange",i);try{await c.requestFullscreen()}catch{}n(1,u=!0)}),nt(async()=>{document.removeEventListener("fullscreenchange",i);try{await document.exitFullscreen()}catch{}});function f(_){he[_?"unshift":"push"](()=>{c=_,n(0,c)})}return s.$$set=_=>{"$$scope"in _&&n(3,l=_.$$scope)},[c,u,a,l,t,f]}class Ms extends se{constructor(e){super(),le(this,e,Bs,Os,ne,{})}}function zs(s){let e,n;return{c(){e=C("div"),this.h()},l(t){e=I(t,"DIV",{style:!0}),A(e).forEach(m),this.h()},h(){g(e,"style",n=s[0]?`position:absolute;top:${s[0]};`:void 0)},m(t,l){F(t,e,l),s[3](e)},p(t,[l]){l&1&&n!==(n=t[0]?`position:absolute;top:${t[0]};`:void 0)&&g(e,"style",n)},i:K,o:K,d(t){t&&m(e),s[3](null)}}}function qs(s,e,n){let{rootMargin:t}=e,{absoluteTop:l}=e;const o=Ve(),r=new IntersectionObserver(c=>{c[0].isIntersecting&&o("intersection")},{rootMargin:t});let a;function i(c){he[c?"unshift":"push"](()=>{a=c,n(1,a)})}return s.$$set=c=>{"rootMargin"in c&&n(2,t=c.rootMargin),"absoluteTop"in c&&n(0,l=c.absoluteTop)},s.$$.update=()=>{s.$$.dirty&2&&(r.disconnect(),a&&r.observe(a))},[l,a,t,i]}class fn extends se{constructor(e){super(),le(this,e,qs,zs,ne,{rootMargin:2,absoluteTop:0})}}function Hs(s){let e,n;return{c(){e=C("a"),n=x("Open"),this.h()},l(t){e=I(t,"A",{href:!0,target:!0,class:!0});var l=A(e);n=ee(l,"Open"),l.forEach(m),this.h()},h(){g(e,"href",s[0]),g(e,"target","_newtab"),g(e,"class","codicon codicon-link-external svelte-10flxu9")},m(t,l){F(t,e,l),h(e,n)},p(t,[l]){l&1&&g(e,"href",t[0])},i:K,o:K,d(t){t&&m(e)}}}function Us(s,e,n){let{url:t}=e;return s.$$set=l=>{"url"in l&&n(0,t=l.url)},[t]}class Gs extends se{constructor(e){super(),le(this,e,Us,Hs,ne,{url:0})}}function wt(s,e,n){const t=s.slice();return t[4]=e[n][0],t[5]=e[n][1],t}function yt(s){let e,n="•",t,l,o;return l=new tn({props:{source:s[0].source}}),{c(){e=C("span"),e.textContent=n,t=j(),O(l.$$.fragment)},l(r){e=I(r,"SPAN",{"data-svelte-h":!0}),ae(e)!=="svelte-7hh8jk"&&(e.textContent=n),t=N(r),V(l.$$.fragment,r)},m(r,a){F(r,e,a),F(r,t,a),B(l,r,a),o=!0},p(r,a){const i={};a&1&&(i.source=r[0].source),l.$set(i)},i(r){o||(S(l.$$.fragment,r),o=!0)},o(r){D(l.$$.fragment,r),o=!1},d(r){r&&(m(e),m(t)),M(l,r)}}}function Et(s){let e,n=s[4]+"",t,l,o,r;return o=new sn({props:{tags:s[5]}}),{c(){e=C("h3"),t=x(n),l=j(),O(o.$$.fragment),this.h()},l(a){e=I(a,"H3",{class:!0});var i=A(e);t=ee(i,n),i.forEach(m),l=N(a),V(o.$$.fragment,a),this.h()},h(){g(e,"class","svelte-1tsjp7g")},m(a,i){F(a,e,i),h(e,t),F(a,l,i),B(o,a,i),r=!0},p(a,i){(!r||i&2)&&n!==(n=a[4]+"")&&$e(t,n);const c={};i&2&&(c.tags=a[5]),o.$set(c)},i(a){r||(S(o.$$.fragment,a),r=!0)},o(a){D(o.$$.fragment,a),r=!1},d(a){a&&(m(e),m(l)),M(o,a)}}}function Ks(s){let e,n,t,l,o,r,a,i,c=s[0].id+"",u,f,_,v,d,p,k="•",L,y,E=s[0].type.toUpperCase()+"",$,b,w,R="•",T,P,q,J,fe="•",pe,ue,Y,te,U,W,oe,Q="•",ke,we,ve,Ee,Le="•",Ge,Pe,st,ct,Te,lt,Be,ft="Comments",rt,Me,ze;v=new Rn({props:{value:s[0].rating}}),P=new xt({props:{value:s[0].score}}),ue=new en({props:{value:s[0].change}}),U=new Gs({props:{url:"/post?id="+s[0].id+"&src="+encodeURIComponent(s[3])}}),we=new tn({props:{source:"https://rule34.xxx/index.php?page=post&s=view&id="+s[0].id}}),Pe=new Fn({props:{url:s[3]}});let ce=s[0].source&&yt(s),qe=be(Object.entries(s[1])),z=[];for(let H=0;H<qe.length;H+=1)z[H]=Et(wt(s,qe,H));const re=H=>D(z[H],1,1,()=>{z[H]=null});return Me=new nn({props:{post:s[0]}}),{c(){e=C("div"),n=C("img"),l=j(),o=C("h1"),r=x("Post "),a=C("b"),i=x("#"),u=x(c),f=j(),_=C("div"),O(v.$$.fragment),d=j(),p=C("span"),p.textContent=k,L=j(),y=C("span"),$=x(E),b=j(),w=C("span"),w.textContent=R,T=j(),O(P.$$.fragment),q=j(),J=C("span"),J.textContent=fe,pe=j(),O(ue.$$.fragment),Y=j(),te=C("div"),O(U.$$.fragment),W=j(),oe=C("span"),oe.textContent=Q,ke=j(),O(we.$$.fragment),ve=j(),Ee=C("span"),Ee.textContent=Le,Ge=j(),O(Pe.$$.fragment),st=j(),ce&&ce.c(),ct=j(),Te=C("div");for(let H=0;H<z.length;H+=1)z[H].c();lt=j(),Be=C("h3"),Be.textContent=ft,rt=j(),O(Me.$$.fragment),this.h()},l(H){e=I(H,"DIV",{class:!0});var G=A(e);n=I(G,"IMG",{class:!0,src:!0,alt:!0}),l=N(G),o=I(G,"H1",{class:!0});var de=A(o);r=ee(de,"Post "),a=I(de,"B",{});var Se=A(a);i=ee(Se,"#"),u=ee(Se,c),Se.forEach(m),de.forEach(m),f=N(G),_=I(G,"DIV",{class:!0});var ie=A(_);V(v.$$.fragment,ie),d=N(ie),p=I(ie,"SPAN",{"data-svelte-h":!0}),ae(p)!=="svelte-7hh8jk"&&(p.textContent=k),L=N(ie),y=I(ie,"SPAN",{});var De=A(y);$=ee(De,E),De.forEach(m),b=N(ie),w=I(ie,"SPAN",{"data-svelte-h":!0}),ae(w)!=="svelte-7hh8jk"&&(w.textContent=R),T=N(ie),V(P.$$.fragment,ie),q=N(ie),J=I(ie,"SPAN",{"data-svelte-h":!0}),ae(J)!=="svelte-7hh8jk"&&(J.textContent=fe),pe=N(ie),V(ue.$$.fragment,ie),ie.forEach(m),Y=N(G),te=I(G,"DIV",{class:!0});var me=A(te);V(U.$$.fragment,me),W=N(me),oe=I(me,"SPAN",{"data-svelte-h":!0}),ae(oe)!=="svelte-7hh8jk"&&(oe.textContent=Q),ke=N(me),V(we.$$.fragment,me),ve=N(me),Ee=I(me,"SPAN",{"data-svelte-h":!0}),ae(Ee)!=="svelte-7hh8jk"&&(Ee.textContent=Le),Ge=N(me),V(Pe.$$.fragment,me),st=N(me),ce&&ce.l(me),me.forEach(m),ct=N(G),Te=I(G,"DIV",{});var He=A(Te);for(let ot=0;ot<z.length;ot+=1)z[ot].l(He);lt=N(He),Be=I(He,"H3",{class:!0,"data-svelte-h":!0}),ae(Be)!=="svelte-kc6sae"&&(Be.textContent=ft),rt=N(He),V(Me.$$.fragment,He),He.forEach(m),G.forEach(m),this.h()},h(){g(n,"class","preview svelte-1tsjp7g"),Ie(n.src,t=s[2])||g(n,"src",t),g(n,"alt","preview"),g(o,"class","svelte-1tsjp7g"),g(_,"class","flex-row svelte-1tsjp7g"),g(te,"class","flex-row svelte-1tsjp7g"),g(Be,"class","svelte-1tsjp7g"),g(e,"class","details svelte-1tsjp7g")},m(H,G){F(H,e,G),h(e,n),h(e,l),h(e,o),h(o,r),h(o,a),h(a,i),h(a,u),h(e,f),h(e,_),B(v,_,null),h(_,d),h(_,p),h(_,L),h(_,y),h(y,$),h(_,b),h(_,w),h(_,T),B(P,_,null),h(_,q),h(_,J),h(_,pe),B(ue,_,null),h(e,Y),h(e,te),B(U,te,null),h(te,W),h(te,oe),h(te,ke),B(we,te,null),h(te,ve),h(te,Ee),h(te,Ge),B(Pe,te,null),h(te,st),ce&&ce.m(te,null),h(e,ct),h(e,Te);for(let de=0;de<z.length;de+=1)z[de]&&z[de].m(Te,null);h(Te,lt),h(Te,Be),h(Te,rt),B(Me,Te,null),ze=!0},p(H,[G]){(!ze||G&4&&!Ie(n.src,t=H[2]))&&g(n,"src",t),(!ze||G&1)&&c!==(c=H[0].id+"")&&$e(u,c);const de={};G&1&&(de.value=H[0].rating),v.$set(de),(!ze||G&1)&&E!==(E=H[0].type.toUpperCase()+"")&&$e($,E);const Se={};G&1&&(Se.value=H[0].score),P.$set(Se);const ie={};G&1&&(ie.value=H[0].change),ue.$set(ie);const De={};G&9&&(De.url="/post?id="+H[0].id+"&src="+encodeURIComponent(H[3])),U.$set(De);const me={};G&1&&(me.source="https://rule34.xxx/index.php?page=post&s=view&id="+H[0].id),we.$set(me);const He={};if(G&8&&(He.url=H[3]),Pe.$set(He),H[0].source?ce?(ce.p(H,G),G&1&&S(ce,1)):(ce=yt(H),ce.c(),S(ce,1),ce.m(te,null)):ce&&(_e(),D(ce,1,1,()=>{ce=null}),ge()),G&2){qe=be(Object.entries(H[1]));let ye;for(ye=0;ye<qe.length;ye+=1){const gt=wt(H,qe,ye);z[ye]?(z[ye].p(gt,G),S(z[ye],1)):(z[ye]=Et(gt),z[ye].c(),S(z[ye],1),z[ye].m(Te,lt))}for(_e(),ye=qe.length;ye<z.length;ye+=1)re(ye);ge()}const ot={};G&1&&(ot.post=H[0]),Me.$set(ot)},i(H){if(!ze){S(v.$$.fragment,H),S(P.$$.fragment,H),S(ue.$$.fragment,H),S(U.$$.fragment,H),S(we.$$.fragment,H),S(Pe.$$.fragment,H),S(ce);for(let G=0;G<qe.length;G+=1)S(z[G]);S(Me.$$.fragment,H),ze=!0}},o(H){D(v.$$.fragment,H),D(P.$$.fragment,H),D(ue.$$.fragment,H),D(U.$$.fragment,H),D(we.$$.fragment,H),D(Pe.$$.fragment,H),D(ce),z=z.filter(Boolean);for(let G=0;G<z.length;G+=1)D(z[G]);D(Me.$$.fragment,H),ze=!1},d(H){H&&m(e),M(v),M(P),M(ue),M(U),M(we),M(Pe),ce&&ce.d(),Ye(z,H),M(Me)}}}function Ws(s,e,n){let t,l,o,{post:r}=e;return s.$$set=a=>{"post"in a&&n(0,r=a.post)},s.$$.update=()=>{s.$$.dirty&1&&n(3,t=r.file_url),s.$$.dirty&1&&n(2,l=r.sample_url),s.$$.dirty&1&&n(1,o=r.tags.reduce((a,i)=>(a[i.type]===void 0&&(a[i.type]=[]),a[i.type].push(i),a),{}))},[r,o,l,t]}class Js extends se{constructor(e){super(),le(this,e,Ws,Ks,ne,{post:0})}}const it=new IntersectionObserver(s=>{for(const e of s)if(e.target){const n=e.target;e.isIntersecting&&n.autoplay&&n.paused&&n.play(),!e.isIntersecting&&!n.paused&&n.pause()}},{rootMargin:"-1px",threshold:.001});function Qs(s){let e,n,t,l;return{c(){e=C("div"),n=C("input"),this.h()},l(o){e=I(o,"DIV",{class:!0});var r=A(e);n=I(r,"INPUT",{type:!0,step:!0,max:!0,class:!0}),r.forEach(m),this.h()},h(){g(n,"type","range"),g(n,"step","0.001"),g(n,"max",s[1]),g(n,"class","svelte-dfxj87"),g(e,"class","svelte-dfxj87")},m(o,r){F(o,e,r),h(e,n),We(n,s[0]),t||(l=[X(n,"change",s[5]),X(n,"input",s[5]),X(n,"scroll",xe(at(s[4]))),X(e,"click",xe(at(s[2]))),X(e,"scroll",xe(at(s[3])))],t=!0)},p(o,[r]){r&2&&g(n,"max",o[1]),r&1&&We(n,o[0])},i:K,o:K,d(o){o&&m(e),t=!1,Ze(l)}}}function Ys(s,e,n){let{value:t}=e,{max:l}=e;function o(c){Fe.call(this,s,c)}function r(c){Fe.call(this,s,c)}function a(c){Fe.call(this,s,c)}function i(){t=bn(this.value),n(0,t)}return s.$$set=c=>{"value"in c&&n(0,t=c.value),"max"in c&&n(1,l=c.max)},[t,l,o,r,a,i]}class pn extends se{constructor(e){super(),le(this,e,Ys,Qs,ne,{value:0,max:1})}}function St(s){let e,n=pt(s[2])+"",t,l,o=pt(s[4])+"",r;return{c(){e=C("span"),t=x(n),l=x(" / "),r=x(o),this.h()},l(a){e=I(a,"SPAN",{class:!0});var i=A(e);t=ee(i,n),l=ee(i," / "),r=ee(i,o),i.forEach(m),this.h()},h(){g(e,"class","svelte-r1orid")},m(a,i){F(a,e,i),h(e,t),h(e,l),h(e,r)},p(a,i){i&4&&n!==(n=pt(a[2])+"")&&$e(t,n),i&16&&o!==(o=pt(a[4])+"")&&$e(r,o)},d(a){a&&m(e)}}}function Zs(s){let e,n,t,l=!1,o,r=!0,a,i,c,u,f,_,v;function d(){cancelAnimationFrame(o),e.paused||(o=An(d),l=!0),s[10].call(e)}let p=s[2]!==void 0&&s[4]!==void 0&&St(s);function k(y){s[13](y)}let L={max:s[4]};return s[2]!==void 0&&(L.value=s[2]),c=new pn({props:L}),he.push(()=>Ne(c,"value",k)),{c(){e=C("video"),a=j(),p&&p.c(),i=j(),O(c.$$.fragment),this.h()},l(y){e=I(y,"VIDEO",{src:!0,poster:!0,title:!0,preload:!0,class:!0}),A(e).forEach(m),a=N(y),p&&p.l(y),i=N(y),V(c.$$.fragment,y),this.h()},h(){Ie(e.src,n=s[6])||g(e,"src",n),g(e,"poster",s[5]),g(e,"title",t="[VIDEO] post #"+s[0].id),g(e,"preload","metadata"),e.autoplay=!0,g(e,"class","svelte-r1orid"),s[4]===void 0&&kn(()=>s[12].call(e))},m(y,E){F(y,e,E),s[9](e),F(y,a,E),p&&p.m(y,E),F(y,i,E),B(c,y,E),f=!0,_||(v=[X(e,"timeupdate",d),X(e,"play",s[11]),X(e,"pause",s[11]),X(e,"durationchange",s[12]),X(e,"click",Xs),X(e,"ended",s[8]),X(e,"contextmenu",at(xs))],_=!0)},p(y,[E]){(!f||E&64&&!Ie(e.src,n=y[6]))&&g(e,"src",n),(!f||E&32)&&g(e,"poster",y[5]),(!f||E&1&&t!==(t="[VIDEO] post #"+y[0].id))&&g(e,"title",t),!l&&E&4&&!isNaN(y[2])&&(e.currentTime=y[2]),l=!1,E&8&&r!==(r=y[3])&&e[r?"pause":"play"](),y[2]!==void 0&&y[4]!==void 0?p?p.p(y,E):(p=St(y),p.c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null);const $={};E&16&&($.max=y[4]),!u&&E&4&&(u=!0,$.value=y[2],je(()=>u=!1)),c.$set($)},i(y){f||(S(c.$$.fragment,y),f=!0)},o(y){D(c.$$.fragment,y),f=!1},d(y){y&&(m(e),m(a),m(i)),s[9](null),p&&p.d(y),M(c,y),_=!1,Ze(v)}}}const Xs=s=>s.target.paused?s.target.play():s.target.pause(),xs=()=>{};function el(s,e,n){let t,l,o,{post:r}=e,a,i=0,c=!1,u;const f=y=>{a&&(y.key==="ArrowLeft"&&(y.preventDefault(),y.stopPropagation(),n(1,a.currentTime=Math.max(0,a.currentTime-5),a)),y.key==="ArrowRight"&&(y.preventDefault(),y.stopPropagation(),n(1,a.currentTime=Math.min(a.duration,a.currentTime+5),a)),y.key==="Space"&&(y.preventDefault(),y.stopPropagation(),n(3,c=!c)))};tt(()=>{a&&(it==null||it.observe(a)),document.addEventListener("keydown",f)}),nt(()=>{a&&(it==null||it.unobserve(a)),document.removeEventListener("keydown",f)});function _(y){Fe.call(this,s,y)}function v(y){he[y?"unshift":"push"](()=>{a=y,n(1,a)})}function d(){i=this.currentTime,n(2,i)}function p(){c=this.paused,n(3,c)}function k(){u=this.duration,n(4,u)}function L(y){i=y,n(2,i)}return s.$$set=y=>{"post"in y&&n(0,r=y.post)},s.$$.update=()=>{s.$$.dirty&1&&n(7,t=ln(r.file_url,r.sample_url,r.preview_url)),s.$$.dirty&128&&n(6,l=t.animated),s.$$.dirty&128&&n(5,o=t.static)},[r,a,i,c,u,o,l,t,_,v,d,p,k,L]}class tl extends se{constructor(e){super(),le(this,e,el,Zs,ne,{post:0})}}function nl(s){return{c:K,l:K,m:K,p:K,i:K,o:K,d:K}}function sl(s){let e,n,t,l,o,r;return{c(){e=C("img"),this.h()},l(a){e=I(a,"IMG",{src:!0,alt:!0,title:!0,class:!0}),this.h()},h(){Ie(e.src,n=s[2])||g(e,"src",n),g(e,"alt",t="["+s[0].type+"] post #"+s[0].id),g(e,"title",l="["+s[0].type+"] post #"+s[0].id),g(e,"class","svelte-jlq3re")},m(a,i){F(a,e,i),o||(r=[X(e,"contextmenu",at(il)),X(e,"click",s[6]),wn(s[7].call(null,e))],o=!0)},p(a,i){i&4&&!Ie(e.src,n=a[2])&&g(e,"src",n),i&1&&t!==(t="["+a[0].type+"] post #"+a[0].id)&&g(e,"alt",t),i&1&&l!==(l="["+a[0].type+"] post #"+a[0].id)&&g(e,"title",l)},i:K,o:K,d(a){a&&m(e),o=!1,Ze(r)}}}function ll(s){let e,n,t,l,o,r,a,i,c,u;return a=new _t({}),{c(){e=C("img"),o=j(),r=C("div"),O(a.$$.fragment),this.h()},l(f){e=I(f,"IMG",{src:!0,alt:!0,title:!0,class:!0}),o=N(f),r=I(f,"DIV",{class:!0});var _=A(r);V(a.$$.fragment,_),_.forEach(m),this.h()},h(){Ie(e.src,n=s[3])||g(e,"src",n),g(e,"alt",t="["+s[0].type+"] post #"+s[0].id),g(e,"title",l="["+s[0].type+"] post #"+s[0].id),g(e,"class","svelte-jlq3re"),g(r,"class","svelte-jlq3re")},m(f,_){F(f,e,_),F(f,o,_),F(f,r,_),B(a,r,null),i=!0,c||(u=[X(e,"contextmenu",at(ol)),X(e,"click",s[6])],c=!0)},p(f,_){(!i||_&8&&!Ie(e.src,n=f[3]))&&g(e,"src",n),(!i||_&1&&t!==(t="["+f[0].type+"] post #"+f[0].id))&&g(e,"alt",t),(!i||_&1&&l!==(l="["+f[0].type+"] post #"+f[0].id))&&g(e,"title",l)},i(f){i||(S(a.$$.fragment,f),i=!0)},o(f){D(a.$$.fragment,f),i=!1},d(f){f&&(m(e),m(o),m(r)),M(a),c=!1,Ze(u)}}}function Ct(s){let e,n,t;function l(r){s[10](r)}let o={max:s[5]};return s[1]!==void 0&&(o.value=s[1]),e=new pn({props:o}),he.push(()=>Ne(e,"value",l)),{c(){O(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){B(e,r,a),t=!0},p(r,a){const i={};a&32&&(i.max=r[5]),!n&&a&2&&(n=!0,i.value=r[1],je(()=>n=!1)),e.$set(i)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function rl(s){let e,n,t,l,o={ctx:s,current:null,token:null,hasCatch:!1,pending:ll,then:sl,catch:nl,value:21,blocks:[,,,]};ht(e=s[8](s[2]),o);let r=s[4]&&Ct(s);return{c(){o.block.c(),n=j(),r&&r.c(),t=Ae()},l(a){o.block.l(a),n=N(a),r&&r.l(a),t=Ae()},m(a,i){o.block.m(a,o.anchor=i),o.mount=()=>n.parentNode,o.anchor=n,F(a,n,i),r&&r.m(a,i),F(a,t,i),l=!0},p(a,[i]){s=a,o.ctx=s,i&4&&e!==(e=s[8](s[2]))&&ht(e,o)||Hn(o,s,i),s[4]?r?(r.p(s,i),i&16&&S(r,1)):(r=Ct(s),r.c(),S(r,1),r.m(t.parentNode,t)):r&&(_e(),D(r,1,1,()=>{r=null}),ge())},i(a){l||(S(o.block),S(r),l=!0)},o(a){for(let i=0;i<3;i+=1){const c=o.blocks[i];D(c)}D(r),l=!1},d(a){a&&(m(n),m(t)),o.block.d(a),o.token=null,o=null,r&&r.d(a)}}}const ol=()=>{},il=()=>{};function al(s,e,n){let t,l,o,r;Z(s,Jt,T=>n(4,o=T)),Z(s,Dn,T=>n(5,r=T));const a=Ve();let{post:i}=e,{postId:c=-1}=e;const u=(T,P,q,J)=>{if(T==="gif"){const fe=On(P,q,J);return[fe.static,fe.animated]}return Un?[q,P]:[J,q]};let f=0,_=Date.now(),v=Date.now(),d,p=!0,k;const L=()=>{v=Date.now(),d=v-_,_=v,p||n(1,f+=d/1e3),f>=r&&(a("ended"),n(1,f=0)),k=requestAnimationFrame(L)},y=()=>{p=!p},E=T=>{(T.code==="Space"||T.key==="k")&&(T.preventDefault(),T.stopPropagation(),p=!p)},$=new IntersectionObserver(T=>{for(const P of T)P.target&&(p=!P.isIntersecting)},{rootMargin:"0px",threshold:.5}),b=T=>($==null||$.observe(T),{destroy(){$==null||$.unobserve(T)}});tt(()=>{o&&(k=requestAnimationFrame(L),document.addEventListener("keydown",E))}),nt(()=>{cancelAnimationFrame(k),document.removeEventListener("keydown",E)});const w=T=>new Promise(P=>{p=!0;let q=new Image;q.onload=J=>{P(J),p=!1},q.src=T});function R(T){f=T,n(1,f),n(0,i),n(9,c)}return s.$$set=T=>{"post"in T&&n(0,i=T.post),"postId"in T&&n(9,c=T.postId)},s.$$.update=()=>{s.$$.dirty&1&&n(3,[t,l]=u(i.type,i.file_url,i.sample_url,i.preview_url),t,(n(2,l),n(0,i))),s.$$.dirty&513&&i.id!==c&&(n(9,c=i.id),n(1,f=0))},[i,f,l,t,o,r,y,b,w,c,R]}class cl extends se{constructor(e){super(),le(this,e,al,rl,ne,{post:0,postId:9})}}function ul(s){let e,n;return e=new cl({props:{post:s[0]}}),e.$on("ended",s[2]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function fl(s){let e,n;return e=new tl({props:{post:s[0]}}),e.$on("ended",s[1]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.post=t[0]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function pl(s){let e,n,t,l;const o=[fl,ul],r=[];function a(i,c){return i[0].type==="video"?0:1}return n=a(s),t=r[n]=o[n](s),{c(){e=C("div"),t.c(),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=A(e);t.l(c),c.forEach(m),this.h()},h(){g(e,"class","svelte-acjk3s")},m(i,c){F(i,e,c),r[n].m(e,null),l=!0},p(i,[c]){let u=n;n=a(i),n===u?r[n].p(i,c):(_e(),D(r[u],1,1,()=>{r[u]=null}),ge(),t=r[n],t?t.p(i,c):(t=r[n]=o[n](i),t.c()),S(t,1),t.m(e,null))},i(i){l||(S(t),l=!0)},o(i){D(t),l=!1},d(i){i&&m(e),r[n].d()}}}function dl(s,e,n){let{post:t}=e;function l(r){Fe.call(this,s,r)}function o(r){Fe.call(this,s,r)}return s.$$set=r=>{"post"in r&&n(0,t=r.post)},[t,l,o]}class _l extends se{constructor(e){super(),le(this,e,dl,pl,ne,{post:0})}}function gl(s){let e,n,t;return{c(){e=C("img"),this.h()},l(l){e=I(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ie(e.src,n=s[2])||g(e,"src",n),g(e,"alt",t="post #"+s[0].id),g(e,"class","svelte-itxz72"),Re(e,"top",s[1])},m(l,o){F(l,e,o)},p(l,[o]){o&4&&!Ie(e.src,n=l[2])&&g(e,"src",n),o&1&&t!==(t="post #"+l[0].id)&&g(e,"alt",t),o&2&&Re(e,"top",l[1])},i:K,o:K,d(l){l&&m(e)}}}function ml(s,e,n){let t,{post:l}=e,{offset:o}=e;return s.$$set=r=>{"post"in r&&n(0,l=r.post),"offset"in r&&n(1,o=r.offset)},s.$$.update=()=>{s.$$.dirty&1&&n(2,t=Vn(l.sample_url)?l.preview_url:l.sample_url)},[l,o,t]}class dn extends se{constructor(e){super(),le(this,e,ml,gl,ne,{post:0,offset:1})}}const hl=()=>{const{subscribe:e,set:n}=Wn(Jn.FullscreenHintDone,!1,Yn,Qn);return{subscribe:e,set:n,reset:()=>n(!1)}},It=hl();function Tt(s,e,n){const t=s.slice();return t[22]=e[n],t[24]=n,t}function Dt(s){let e,n;return e=new dn({props:{post:s[7],offset:s[4]}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.post=t[7]),l&16&&(o.offset=t[4]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function vl(s){let e;return{c(){e=C("i"),this.h()},l(n){e=I(n,"I",{class:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","codicon codicon-tag")},m(n,t){F(n,e,t)},p:K,d(n){n&&m(e)}}}function Lt(s){let e,n;return e=new dn({props:{post:s[6],offset:s[3]}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.post=t[6]),l&8&&(o.offset=t[3]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Pt(s){let e,n=`${s[24]*100}vh`;return{c(){e=C("div"),this.h()},l(t){e=I(t,"DIV",{class:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","pseudo snap-item svelte-2epggd"),Re(e,"top",n)},m(t,l){F(t,e,l)},p:K,d(t){t&&m(e)}}}function $l(s){let e,n,t,l,o,r,a,i,c,u,f,_,v,d,p,k=s[7]&&Dt(s);l=new _l({props:{post:s[8]}}),l.$on("ended",s[11]),r=new Js({props:{post:s[8]}}),i=new Xt({props:{class:"details-button",$$slots:{default:[vl]},$$scope:{ctx:s}}}),i.$on("click",s[14]);let L=s[6]&&Lt(s),y=be({length:s[0].posts.length}),E=[];for(let $=0;$<y.length;$+=1)E[$]=Pt(Tt(s,y,$));return _=new fn({props:{absoluteTop:s[0].posts.length*100+"vh",rootMargin:window.innerHeight*3+"px"}}),_.$on("intersection",s[16]),{c(){e=C("div"),k&&k.c(),n=j(),t=C("div"),O(l.$$.fragment),o=j(),O(r.$$.fragment),a=j(),O(i.$$.fragment),c=j(),L&&L.c(),u=j();for(let $=0;$<E.length;$+=1)E[$].c();f=j(),O(_.$$.fragment),this.h()},l($){e=I($,"DIV",{class:!0});var b=A(e);k&&k.l(b),n=N(b),t=I(b,"DIV",{class:!0});var w=A(t);V(l.$$.fragment,w),o=N(w),V(r.$$.fragment,w),a=N(w),V(i.$$.fragment,w),w.forEach(m),c=N(b),L&&L.l(b),u=N(b);for(let R=0;R<E.length;R+=1)E[R].l(b);f=N(b),V(_.$$.fragment,b),b.forEach(m),this.h()},h(){g(t,"class","screen snap-container horizontal current svelte-2epggd"),Ce(t,"hint",!s[9]),Re(t,"top",s[5]),g(e,"class","root screen snap-container svelte-2epggd")},m($,b){F($,e,b),k&&k.m(e,null),h(e,n),h(e,t),B(l,t,null),h(t,o),B(r,t,null),h(t,a),B(i,t,null),s[15](t),h(e,c),L&&L.m(e,null),h(e,u);for(let w=0;w<E.length;w+=1)E[w]&&E[w].m(e,null);h(e,f),B(_,e,null),s[17](e),v=!0,d||(p=X(e,"scroll",s[12]),d=!0)},p($,[b]){$[7]?k?(k.p($,b),b&128&&S(k,1)):(k=Dt($),k.c(),S(k,1),k.m(e,n)):k&&(_e(),D(k,1,1,()=>{k=null}),ge());const w={};b&256&&(w.post=$[8]),l.$set(w);const R={};b&256&&(R.post=$[8]),r.$set(R);const T={};if(b&33554432&&(T.$$scope={dirty:b,ctx:$}),i.$set(T),(!v||b&512)&&Ce(t,"hint",!$[9]),b&32&&Re(t,"top",$[5]),$[6]?L?(L.p($,b),b&64&&S(L,1)):(L=Lt($),L.c(),S(L,1),L.m(e,u)):L&&(_e(),D(L,1,1,()=>{L=null}),ge()),b&1){y=be({length:$[0].posts.length});let q;for(q=0;q<y.length;q+=1){const J=Tt($,y,q);E[q]?E[q].p(J,b):(E[q]=Pt(J),E[q].c(),E[q].m(e,f))}for(;q<E.length;q+=1)E[q].d(1);E.length=y.length}const P={};b&1&&(P.absoluteTop=$[0].posts.length*100+"vh"),_.$set(P)},i($){v||(S(k),S(l.$$.fragment,$),S(r.$$.fragment,$),S(i.$$.fragment,$),S(L),S(_.$$.fragment,$),v=!0)},o($){D(k),D(l.$$.fragment,$),D(r.$$.fragment,$),D(i.$$.fragment,$),D(L),D(_.$$.fragment,$),v=!1},d($){$&&m(e),k&&k.d(),M(l),M(r),M(i),s[15](null),L&&L.d(),Ye(E,$),M(_),s[17](null),d=!1,p()}}}function bl(s,e,n){let t,l,o,r,a,i,c,u,f;Z(s,It,P=>n(9,c=P)),Z(s,Jt,P=>n(18,u=P)),Z(s,Je,P=>n(0,f=P));const _=Ve();let{index:v}=e,d,p;const k=()=>{d.scrollTo({left:0,top:d.clientHeight*(v-1),behavior:"smooth"})},L=()=>{d.scrollTo({left:0,top:d.clientHeight*(v+1),behavior:"smooth"})},y=()=>{u&&L()},E=P=>{requestAnimationFrame(()=>{const q=P.target,J=q.getBoundingClientRect().height,fe=q.scrollTop/J,pe=Math.round(fe);pe!=v&&(n(13,v=pe),p&&n(2,p.scrollLeft=0,p))})},$=P=>{P.key==="d"&&(P.preventDefault(),P.stopPropagation(),p.scrollLeft===0?p.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"}):p.scrollBy({left:-d.clientWidth,top:0,behavior:"smooth"})),P.key==="ArrowUp"&&(P.preventDefault(),P.stopPropagation(),k()),P.key==="ArrowDown"&&(P.preventDefault(),P.stopPropagation(),L())};tt(()=>{p&&(p.scrollIntoView(!0),n(2,p.scrollLeft=0,p)),document.addEventListener("keydown",$)}),nt(()=>{yn(It,c=!0,c),document.removeEventListener("keydown",$)});const b=()=>p.scrollBy({left:d.clientWidth,top:0,behavior:"smooth"});function w(P){he[P?"unshift":"push"](()=>{p=P,n(2,p)})}const R=()=>_("endreached");function T(P){he[P?"unshift":"push"](()=>{d=P,n(1,d)})}return s.$$set=P=>{"index"in P&&n(13,v=P.index)},s.$$.update=()=>{s.$$.dirty&8193&&n(8,t=f.posts[v]),s.$$.dirty&8193&&n(7,l=v>0?f.posts[v-1]:void 0),s.$$.dirty&8193&&n(6,o=v<f.posts.length-1?f.posts[v+1]:void 0),s.$$.dirty&8192&&n(5,r=`${v*100}vh`),s.$$.dirty&8192&&n(4,a=`${(v-1)*100}vh`),s.$$.dirty&8192&&n(3,i=`${(v+1)*100}vh`)},[f,d,p,i,a,r,o,l,t,c,_,y,E,v,b,w,R,T]}class kl extends se{constructor(e){super(),le(this,e,bl,$l,ne,{index:13})}}function wl(s){let e;return{c(){e=C("i"),this.h()},l(n){e=I(n,"I",{class:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","codicon codicon-close")},m(n,t){F(n,e,t)},p:K,d(n){n&&m(e)}}}function yl(s){let e,n,t,l,o;function r(i){s[2](i)}let a={};return s[0]!==void 0&&(a.index=s[0]),e=new kl({props:a}),he.push(()=>Ne(e,"index",r)),e.$on("endreached",s[3]),l=new Xt({props:{class:"button-close",$$slots:{default:[wl]},$$scope:{ctx:s}}}),l.$on("click",s[1]),{c(){O(e.$$.fragment),t=j(),O(l.$$.fragment)},l(i){V(e.$$.fragment,i),t=N(i),V(l.$$.fragment,i)},m(i,c){B(e,i,c),F(i,t,c),B(l,i,c),o=!0},p(i,c){const u={};!n&&c&1&&(n=!0,u.index=i[0],je(()=>n=!1)),e.$set(u);const f={};c&128&&(f.$$scope={dirty:c,ctx:i}),l.$set(f)},i(i){o||(S(e.$$.fragment,i),S(l.$$.fragment,i),o=!0)},o(i){D(e.$$.fragment,i),D(l.$$.fragment,i),o=!1},d(i){i&&m(t),M(e,i),M(l,i)}}}function El(s){let e,n;return e=new Ms({props:{$$slots:{default:[yl]},$$scope:{ctx:s}}}),e.$on("close",s[1]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,[l]){const o={};l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Sl(s,e,n){let{index:t}=e;const l=Ve(),o=()=>{l("close",t)},r=u=>{u.key==="f"&&(u.preventDefault(),u.stopPropagation(),o())},a=()=>{var u,f;(((u=history.state)==null?void 0:u.fullscreen)===void 0||((f=history.state)==null?void 0:f.fullscreen)===!1)&&o()};tt(()=>{window.addEventListener("popstate",a),document.addEventListener("keydown",r)}),nt(()=>{window.removeEventListener("popstate",a),document.removeEventListener("keydown",r)});function i(u){t=u,n(0,t)}function c(u){Fe.call(this,s,u)}return s.$$set=u=>{"index"in u&&n(0,t=u.index)},[t,o,i,c]}class Cl extends se{constructor(e){super(),le(this,e,Sl,El,ne,{index:0})}}function jt(s){let e,n=s[0].type==="video"?"▶":"GIF",t;return{c(){e=C("span"),t=x(n),this.h()},l(l){e=I(l,"SPAN",{class:!0});var o=A(e);t=ee(o,n),o.forEach(m),this.h()},h(){g(e,"class","type svelte-rfj0jo")},m(l,o){F(l,e,o),h(e,t)},p(l,o){o&1&&n!==(n=l[0].type==="video"?"▶":"GIF")&&$e(t,n)},d(l){l&&m(e)}}}function Il(s){let e,n,t,l,o,r,a=Oe(s[0].score)+"",i,c,u,f,_=s[0].type!=="image"&&jt(s);return{c(){e=C("div"),n=C("img"),l=j(),_&&_.c(),o=j(),r=C("span"),i=x(a),this.h()},l(v){e=I(v,"DIV",{id:!0,class:!0,style:!0});var d=A(e);n=I(d,"IMG",{src:!0,alt:!0,class:!0,tabindex:!0,loading:!0}),l=N(d),_&&_.l(d),o=N(d),r=I(d,"SPAN",{class:!0});var p=A(r);i=ee(p,a),p.forEach(m),d.forEach(m),this.h()},h(){Ie(n.src,t=s[1])||g(n,"src",t),g(n,"alt","post"),g(n,"class","post-media svelte-rfj0jo"),g(n,"tabindex","-1"),g(n,"loading","lazy"),g(r,"class","score svelte-rfj0jo"),g(e,"id",c=ut(s[0].id)),g(e,"class","post svelte-rfj0jo"),Re(e,"grid-row","span "+s[2]),Ce(e,"open",open)},m(v,d){F(v,e,d),h(e,n),h(e,l),_&&_.m(e,null),h(e,o),h(e,r),h(r,i),u||(f=[X(e,"click",s[3]),X(e,"keydown",s[4])],u=!0)},p(v,[d]){d&2&&!Ie(n.src,t=v[1])&&g(n,"src",t),v[0].type!=="image"?_?_.p(v,d):(_=jt(v),_.c(),_.m(e,o)):_&&(_.d(1),_=null),d&1&&a!==(a=Oe(v[0].score)+"")&&$e(i,a),d&1&&c!==(c=ut(v[0].id))&&g(e,"id",c),d&0&&Ce(e,"open",open)},i:K,o:K,d(v){v&&m(e),_&&_.d(),u=!1,Ze(f)}}}let Nt=5;function Tl(s,e,n){let t,{post:l}=e,o=1/3,r=Bn(l.width,l.height),a=Math.max(Math.min(Math.round(Nt/r),Nt/o),2);const i=f=>f.endsWith(".jpg")||f.endsWith(".jpeg")||f.endsWith(".png")||f.endsWith(".webp");function c(f){Fe.call(this,s,f)}const u=f=>{var _;(Gn(f)||f.key==="f")&&((_=f.target)==null||_.click())};return s.$$set=f=>{"post"in f&&n(0,l=f.post)},s.$$.update=()=>{s.$$.dirty&1&&n(1,t=i(l.sample_url)?l.sample_url:l.preview_url)},[l,t,a,c,u]}class Dl extends se{constructor(e){super(),le(this,e,Tl,Il,ne,{post:0})}}function Rt(s,e,n){const t=s.slice();t[2]=e[n];const l=t[2].host.replace("www.","");t[3]=l;const o=t[1][t[3]]??t[1].default;t[4]=o[0],t[5]=o[1];const r=t[3].includes("api-cdn")?"File":t[3];return t[6]=r,t}function Ft(s){let e,n,t=s[6]+"",l,o,r,a;return{c(){e=C("li"),n=C("a"),l=x(t),a=j(),this.h()},l(i){e=I(i,"LI",{});var c=A(e);n=I(c,"A",{href:!0,class:!0,style:!0});var u=A(n);l=ee(u,t),u.forEach(m),a=N(c),c.forEach(m),this.h()},h(){g(n,"href",o=s[2].toString()),g(n,"class",r="codicon codicon-link-external "+s[5]+" svelte-f59j30"),Re(n,"background-color",s[4]),Re(n,"color",s[5])},m(i,c){F(i,e,c),h(e,n),h(n,l),h(e,a)},p(i,c){c&1&&t!==(t=i[6]+"")&&$e(l,t),c&1&&o!==(o=i[2].toString())&&g(n,"href",o),c&1&&r!==(r="codicon codicon-link-external "+i[5]+" svelte-f59j30")&&g(n,"class",r),c&1&&Re(n,"background-color",i[4]),c&1&&Re(n,"color",i[5])},d(i){i&&m(e)}}}function Ll(s){let e,n=be(s[0]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Ft(Rt(s,n,l));return{c(){e=C("ol");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"OL",{class:!0});var o=A(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){g(e,"class","svelte-f59j30")},m(l,o){F(l,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(l,[o]){if(o&3){n=be(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Rt(l,n,r);t[r]?t[r].p(a,o):(t[r]=Ft(a),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:K,o:K,d(l){l&&m(e),Ye(t,l)}}}function Pl(s,e,n){let{links:t}=e;const l={"kurosearch.com":["crimson","white"],"rule34.xxx":["#aae5a4","black"],"newgrounds.com":["#fda238","black"],"twitter.com":["rgb(29, 155, 240)","white"],"x.com":["rgb(29, 155, 240)","white"],"pornhub.com":["#f90","black"],"zone-archive.com":["#59396A","white"],"subscribestar.adult":["#ff4081","white"],"redgifs.com":["#E5194D","white"],"deviantart.com":["#00c787","black"],default:["var(--background-2)","white"]};return s.$$set=o=>{"links"in o&&n(0,t=o.links)},[t,l]}class jl extends se{constructor(e){super(),le(this,e,Pl,Ll,ne,{links:0})}}function At(s){let e,n=Oe(s[0].comment_count)+"",t,l,o;return{c(){e=C("button"),t=x(n),this.h()},l(r){e=I(r,"BUTTON",{type:!0,class:!0});var a=A(e);t=ee(a,n),a.forEach(m),this.h()},h(){g(e,"type","button"),g(e,"class","codicon codicon-comment svelte-nhpj3u"),Ce(e,"active",s[1]==="comments")},m(r,a){F(r,e,a),h(e,t),l||(o=X(e,"click",xe(s[5])),l=!0)},p(r,a){a&1&&n!==(n=Oe(r[0].comment_count)+"")&&$e(t,n),a&2&&Ce(e,"active",r[1]==="comments")},d(r){r&&m(e),l=!1,o()}}}function Nl(s){let e,n,t,l,o="•",r,a,i,c,u,f,_=Oe(s[2])+"",v,d,p,k,L=Oe(s[0].tags.length)+"",y,E,$,b;n=new en({props:{value:s[0].change}}),a=new xt({props:{value:s[0].score}});let w=s[0].comment_count&&At(s);return{c(){e=C("div"),O(n.$$.fragment),t=j(),l=C("span"),l.textContent=o,r=j(),O(a.$$.fragment),i=j(),c=C("span"),u=j(),f=C("button"),v=x(_),d=j(),w&&w.c(),p=j(),k=C("button"),y=x(L),this.h()},l(R){e=I(R,"DIV",{class:!0});var T=A(e);V(n.$$.fragment,T),t=N(T),l=I(T,"SPAN",{"data-svelte-h":!0}),ae(l)!=="svelte-7hh8jk"&&(l.textContent=o),r=N(T),V(a.$$.fragment,T),i=N(T),c=I(T,"SPAN",{class:!0}),A(c).forEach(m),u=N(T),f=I(T,"BUTTON",{type:!0,class:!0});var P=A(f);v=ee(P,_),P.forEach(m),d=N(T),w&&w.l(T),p=N(T),k=I(T,"BUTTON",{type:!0,class:!0});var q=A(k);y=ee(q,L),q.forEach(m),T.forEach(m),this.h()},h(){g(c,"class","divider svelte-nhpj3u"),g(f,"type","button"),g(f,"class","codicon codicon-link svelte-nhpj3u"),Ce(f,"active",s[1]==="links"),g(k,"type","button"),g(k,"class","codicon codicon-tag svelte-nhpj3u"),Ce(k,"active",s[1]==="tags"),g(e,"class","summary svelte-nhpj3u")},m(R,T){F(R,e,T),B(n,e,null),h(e,t),h(e,l),h(e,r),B(a,e,null),h(e,i),h(e,c),h(e,u),h(e,f),h(f,v),h(e,d),w&&w.m(e,null),h(e,p),h(e,k),h(k,y),E=!0,$||(b=[X(f,"click",xe(s[4])),X(k,"click",xe(s[6]))],$=!0)},p(R,[T]){const P={};T&1&&(P.value=R[0].change),n.$set(P);const q={};T&1&&(q.value=R[0].score),a.$set(q),(!E||T&4)&&_!==(_=Oe(R[2])+"")&&$e(v,_),(!E||T&2)&&Ce(f,"active",R[1]==="links"),R[0].comment_count?w?w.p(R,T):(w=At(R),w.c(),w.m(e,p)):w&&(w.d(1),w=null),(!E||T&1)&&L!==(L=Oe(R[0].tags.length)+"")&&$e(y,L),(!E||T&2)&&Ce(k,"active",R[1]==="tags")},i(R){E||(S(n.$$.fragment,R),S(a.$$.fragment,R),E=!0)},o(R){D(n.$$.fragment,R),D(a.$$.fragment,R),E=!1},d(R){R&&m(e),M(n),M(a),w&&w.d(),$=!1,Ze(b)}}}function Rl(s,e,n){const t=Ve();let{post:l}=e,{active:o}=e,{links:r}=e;const a=()=>t("links"),i=()=>t("comments"),c=()=>t("tags");return s.$$set=u=>{"post"in u&&n(0,l=u.post),"active"in u&&n(1,o=u.active),"links"in u&&n(2,r=u.links)},[l,o,r,t,a,i,c]}class Fl extends se{constructor(e){super(),le(this,e,Rl,Nl,ne,{post:0,active:1,links:2})}}function Al(s){let e,n='<i class="codicon codicon-screen-full"></i>',t,l;return{c(){e=C("button"),e.innerHTML=n,this.h()},l(o){e=I(o,"BUTTON",{type:!0,title:!0,class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-hnv5zq"&&(e.innerHTML=n),this.h()},h(){g(e,"type","button"),g(e,"title","Enter Fullscreen mode"),g(e,"class","svelte-txn4jo")},m(o,r){F(o,e,r),t||(l=X(e,"click",s[0]),t=!0)},p:K,i:K,o:K,d(o){o&&m(e),t=!1,l()}}}function Ol(s){function e(n){Fe.call(this,s,n)}return[e]}class Vl extends se{constructor(e){super(),le(this,e,Ol,Al,ne,{})}}function Bl(s){const e=s.slice(),n=ln(e[1].file_url,e[1].sample_url,e[1].preview_url);return e[13]=n,e}function Ml(s){let e,n;return e=new Mn({props:{post:s[1]}}),e.$on("click",s[5]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function zl(s){let e,n;return e=new zn({props:{src:s[13].animated,poster:s[13].static,width:s[1].width,height:s[1].height,loop:s[2]||mt(s[1].tags)}}),e.$on("click",s[5]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.src=t[13].animated),l&2&&(o.poster=t[13].static),l&2&&(o.width=t[1].width),l&2&&(o.height=t[1].height),l&6&&(o.loop=t[2]||mt(t[1].tags)),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function ql(s){let e,n;return e=new qn({props:{post:s[1]}}),e.$on("click",s[5]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Hl(s){let e,n;return e=new jl({props:{links:s[6]}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p:K,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ul(s){let e,n;return e=new nn({props:{post:s[1]}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.post=t[1]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Gl(s){let e,n;return e=new sn({props:{tags:s[1].tags}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.tags=t[1].tags),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Kl(s){let e,n,t,l,o,r,a,i,c,u,f,_,v,d,p,k;const L=[ql,zl,Ml],y=[];function E(T,P){return T[1].type==="image"?0:T[1].type==="video"?1:2}function $(T,P){return P===1?Bl(T):T}t=E(s),l=y[t]=L[t]($(s,t)),r=new Vl({}),r.$on("click",s[7]),c=new Fl({props:{active:s[0],post:s[1],links:s[6].length}}),c.$on("tags",s[8]),c.$on("comments",s[9]),c.$on("links",s[10]);const b=[Gl,Ul,Hl],w=[];function R(T,P){return T[0]==="tags"?0:T[0]==="comments"?1:T[0]==="links"?2:-1}return~(f=R(s))&&(_=w[f]=b[f](s)),{c(){e=C("li"),n=C("div"),l.c(),o=j(),O(r.$$.fragment),a=j(),i=C("div"),O(c.$$.fragment),u=j(),_&&_.c(),this.h()},l(T){e=I(T,"LI",{id:!0,class:!0});var P=A(e);n=I(P,"DIV",{});var q=A(n);l.l(q),q.forEach(m),o=N(P),V(r.$$.fragment,P),a=N(P),i=I(P,"DIV",{class:!0});var J=A(i);V(c.$$.fragment,J),u=N(J),_&&_.l(J),J.forEach(m),P.forEach(m),this.h()},h(){g(i,"class","details svelte-162qa8v"),g(e,"id",v=ut(s[1].id)),g(e,"class","post svelte-162qa8v"),Ce(e,"openTab",s[0])},m(T,P){F(T,e,P),h(e,n),y[t].m(n,null),h(e,o),B(r,e,null),h(e,a),h(e,i),B(c,i,null),h(i,u),~f&&w[f].m(i,null),d=!0,p||(k=X(e,"keydown",s[11]),p=!0)},p(T,[P]){let q=t;t=E(T),t===q?y[t].p($(T,t),P):(_e(),D(y[q],1,1,()=>{y[q]=null}),ge(),l=y[t],l?l.p($(T,t),P):(l=y[t]=L[t]($(T,t)),l.c()),S(l,1),l.m(n,null));const J={};P&1&&(J.active=T[0]),P&2&&(J.post=T[1]),c.$set(J);let fe=f;f=R(T),f===fe?~f&&w[f].p(T,P):(_&&(_e(),D(w[fe],1,1,()=>{w[fe]=null}),ge()),~f?(_=w[f],_?_.p(T,P):(_=w[f]=b[f](T),_.c()),S(_,1),_.m(i,null)):_=null),(!d||P&2&&v!==(v=ut(T[1].id)))&&g(e,"id",v),(!d||P&1)&&Ce(e,"openTab",T[0])},i(T){d||(S(l),S(r.$$.fragment,T),S(c.$$.fragment,T),S(_),d=!0)},o(T){D(l),D(r.$$.fragment,T),D(c.$$.fragment,T),D(_),d=!1},d(T){T&&m(e),y[t].d(),M(r),M(c),~f&&w[f].d(),p=!1,k()}}}function Wl(s,e,n){let t,l;Z(s,Ln,k=>n(12,t=k)),Z(s,Kn,k=>n(2,l=k));const o=Ve();let{post:r}=e,{openTab:a=void 0}=e;const i=k=>{n(0,a=a===k?void 0:k)},c=()=>{t&&i("tags")},u=[new URL(`https://kurosearch.com/post?id=${r.id}&src=${encodeURIComponent(r.file_url)}`),new URL(`https://rule34.xxx/index.php?page=post&s=view&id=${r.id}`),new URL(r.file_url),...r.source?r.source.split(" ").filter(k=>Zn(k)).map(k=>new URL(k)):[]],f=()=>o("fullscreen"),_=()=>i("tags"),v=()=>i("comments"),d=()=>i("links"),p=k=>{k.key==="f"&&o("fullscreen")};return s.$$set=k=>{"post"in k&&n(1,r=k.post),"openTab"in k&&n(0,a=k.openTab)},[a,r,l,o,i,c,u,f,_,v,d,p]}class Jl extends se{constructor(e){super(),le(this,e,Wl,Kl,ne,{post:1,openTab:0})}}function Ot(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Vt(s,e,n){const t=s.slice();return t[7]=e[n],t[9]=n,t}function Ql(s){let e,n,t=be(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Bt(Ot(s,t,r));const o=r=>D(l[r],1,1,()=>{l[r]=null});return{c(){e=C("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=I(r,"OL",{class:!0,style:!0});var a=A(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){g(e,"class","multi-column svelte-1nfzeed"),Re(e,"--nr-columns",s[2])},m(r,a){F(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=be(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Ot(r,t,i);l[i]?(l[i].p(c,a),S(l[i],1)):(l[i]=Bt(c),l[i].c(),S(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}(!n||a&4)&&Re(e,"--nr-columns",r[2])},i(r){if(!n){for(let a=0;a<t.length;a+=1)S(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)D(l[a]);n=!1},d(r){r&&m(e),Ye(l,r)}}}function Yl(s){let e,n,t=be(s[1].posts),l=[];for(let r=0;r<t.length;r+=1)l[r]=Mt(Vt(s,t,r));const o=r=>D(l[r],1,1,()=>{l[r]=null});return{c(){e=C("ol");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=I(r,"OL",{class:!0});var a=A(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(m),this.h()},h(){g(e,"class","single-column svelte-1nfzeed")},m(r,a){F(r,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(r,a){if(a&3){t=be(r[1].posts);let i;for(i=0;i<t.length;i+=1){const c=Vt(r,t,i);l[i]?(l[i].p(c,a),S(l[i],1)):(l[i]=Mt(c),l[i].c(),S(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}},i(r){if(!n){for(let a=0;a<t.length;a+=1)S(l[a]);n=!0}},o(r){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)D(l[a]);n=!1},d(r){r&&m(e),Ye(l,r)}}}function Bt(s){let e,n;function t(){return s[5](s[9])}return e=new Dl({props:{post:s[7]}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){B(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){M(e,l)}}}function Mt(s){let e,n;function t(){return s[4](s[9])}return e=new Jl({props:{post:s[7]}}),e.$on("fullscreen",t),{c(){O(e.$$.fragment)},l(l){V(e.$$.fragment,l)},m(l,o){B(e,l,o),n=!0},p(l,o){s=l;const r={};o&2&&(r.post=s[7]),e.$set(r)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){M(e,l)}}}function zt(s){let e,n;return e=new Cl({props:{index:s[0]}}),e.$on("close",s[3]),e.$on("endreached",s[6]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.index=t[0]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Zl(s){let e,n,t,l,o;const r=[Yl,Ql],a=[];function i(u,f){return u[2]==="1"?0:1}e=i(s),n=a[e]=r[e](s);let c=s[0]!==void 0&&zt(s);return{c(){n.c(),t=j(),c&&c.c(),l=Ae()},l(u){n.l(u),t=N(u),c&&c.l(u),l=Ae()},m(u,f){a[e].m(u,f),F(u,t,f),c&&c.m(u,f),F(u,l,f),o=!0},p(u,[f]){let _=e;e=i(u),e===_?a[e].p(u,f):(_e(),D(a[_],1,1,()=>{a[_]=null}),ge(),n=a[e],n?n.p(u,f):(n=a[e]=r[e](u),n.c()),S(n,1),n.m(t.parentNode,t)),u[0]!==void 0?c?(c.p(u,f),f&1&&S(c,1)):(c=zt(u),c.c(),S(c,1),c.m(l.parentNode,l)):c&&(_e(),D(c,1,1,()=>{c=null}),ge())},i(u){o||(S(n),S(c),o=!0)},o(u){D(n),D(c),o=!1},d(u){u&&(m(t),m(l)),a[e].d(u),c&&c.d(u)}}}function Xl(s,e,n){let t,l;Z(s,Je,u=>n(1,t=u)),Z(s,Zt,u=>n(2,l=u));let o;const r=u=>{var v;const f=t.posts[u.detail],_=ut(f.id);(v=document.getElementById(_))==null||v.scrollIntoView(),n(0,o=void 0)},a=u=>{n(0,o=u)},i=u=>{n(0,o=u)};function c(u){Fe.call(this,s,u)}return s.$$.update=()=>{var u;s.$$.dirty&1&&(o!==void 0?history.pushState({...history.state,fullscreen:!0},""):(u=history.state)!=null&&u.fullscreen&&history.back())},[o,t,l,r,a,i,c]}class xl extends se{constructor(e){super(),le(this,e,Xl,Zl,ne,{})}}function qt(s,e,n){const t=s.slice();return t[8]=e[n],t}function er(s){let e,n="We couldn't find any posts matching your tags. Sorry...";return{c(){e=C("p"),e.textContent=n},l(t){e=I(t,"P",{"data-svelte-h":!0}),ae(e)!=="svelte-1utxj3w"&&(e.textContent=n)},m(t,l){F(t,e,l)},p:K,d(t){t&&m(e)}}}function tr(s){let e,n='<b class="svelte-zfjaug">⚠</b> <span>Conflicting tags detected</span> <b class="svelte-zfjaug">⚠</b>',t,l,o=be(s[0]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Ht(qt(s,o,a));return{c(){e=C("h6"),e.innerHTML=n,t=j(),l=C("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"H6",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1e4zdfj"&&(e.innerHTML=n),t=N(a),l=I(a,"UL",{class:!0});var i=A(l);for(let c=0;c<r.length;c+=1)r[c].l(i);i.forEach(m),this.h()},h(){g(e,"class","svelte-zfjaug"),g(l,"class","svelte-zfjaug")},m(a,i){F(a,e,i),F(a,t,i),F(a,l,i);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(l,null)},p(a,i){if(i&1){o=be(a[0]);let c;for(c=0;c<o.length;c+=1){const u=qt(a,o,c);r[c]?r[c].p(u,i):(r[c]=Ht(u),r[c].c(),r[c].m(l,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=o.length}},d(a){a&&(m(e),m(t),m(l)),Ye(r,a)}}}function Ht(s){let e,n,t="⚠",l,o,r=s[8]+"",a,i;return{c(){e=C("li"),n=C("b"),n.textContent=t,l=j(),o=C("span"),a=x(r),i=j(),this.h()},l(c){e=I(c,"LI",{class:!0});var u=A(e);n=I(u,"B",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-yluixs"&&(n.textContent=t),l=N(u),o=I(u,"SPAN",{});var f=A(o);a=ee(f,r),f.forEach(m),i=N(u),u.forEach(m),this.h()},h(){g(n,"class","svelte-zfjaug"),g(e,"class","svelte-zfjaug")},m(c,u){F(c,e,u),h(e,n),h(e,l),h(e,o),h(o,a),h(e,i)},p(c,u){u&1&&r!==(r=c[8]+"")&&$e(a,r)},d(c){c&&m(e)}}}function nr(s){let e;return{c(){e=x("Reset Filter")},l(n){e=ee(n,"Reset Filter")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function sr(s){let e;return{c(){e=x("Reset Tags")},l(n){e=ee(n,"Reset Tags")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function lr(s){let e,n,t,l,o,r,a,i,c,u;function f(d,p){return d[0].length?tr:er}let _=f(s),v=_(s);return a=new Ue({props:{type:"secondary",title:"In case your filter caused all posts to vanish. Reset it.",$$slots:{default:[nr]},$$scope:{ctx:s}}}),a.$on("click",s[5]),c=new Ue({props:{type:"secondary",title:"Tag combinations that are too specific will not yield results.",$$slots:{default:[sr]},$$scope:{ctx:s}}}),c.$on("click",s[6]),{c(){e=C("section"),n=C("img"),l=j(),v.c(),o=j(),r=C("div"),O(a.$$.fragment),i=j(),O(c.$$.fragment),this.h()},l(d){e=I(d,"SECTION",{class:!0});var p=A(e);n=I(p,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),l=N(p),v.l(p),o=N(p),r=I(p,"DIV",{class:!0});var k=A(r);V(a.$$.fragment,k),i=N(k),V(c.$$.fragment,k),k.forEach(m),p.forEach(m),this.h()},h(){Ie(n.src,t=Wt+"/assets/lynxy-chibi-not-found.webp")||g(n,"src",t),g(n,"alt","Nothing here..."),g(n,"width","1231"),g(n,"height","864"),g(n,"class","svelte-zfjaug"),g(r,"class","svelte-zfjaug"),g(e,"class","svelte-zfjaug")},m(d,p){F(d,e,p),h(e,n),h(e,l),v.m(e,null),h(e,o),h(e,r),B(a,r,null),h(r,i),B(c,r,null),u=!0},p(d,[p]){_===(_=f(d))&&v?v.p(d,p):(v.d(1),v=_(d),v&&(v.c(),v.m(e,o)));const k={};p&2048&&(k.$$scope={dirty:p,ctx:d}),a.$set(k);const L={};p&2048&&(L.$$scope={dirty:p,ctx:d}),c.$set(L)},i(d){u||(S(a.$$.fragment,d),S(c.$$.fragment,d),u=!0)},o(d){D(a.$$.fragment,d),D(c.$$.fragment,d),u=!1},d(d){d&&m(e),v.d(),M(a),M(c)}}}function rr(s,e,n){let t,l,o,r;Z(s,et,f=>n(2,l=f)),Z(s,an,f=>n(3,o=f)),Z(s,Qe,f=>n(4,r=f));const a=Ve(),i=(f,_,v)=>{const d=v.flatMap(L=>L.tags.map(y=>({...y,supertag:L.name}))),p=Object.keys(_).filter(L=>_[L]).flatMap(L=>Cn[L].map(y=>({modifier:"-",name:y,group:L}))),k=[];for(const L of f){const y=p.find($=>$.name===L.name);L.modifier!=="-"&&y&&k.push(`"${L.name}" is blocked by "${y.group}" in preferences.`);const E=d.find($=>$.name===L.name);E&&(L.modifier==="-"&&E.modifier!=="-"&&k.push(`"${L.name}" is excluded but required by supertag "${E.supertag}".`),L.modifier!=="-"&&E.modifier==="-"&&k.push(`"${L.name}" is required but excluded by supertag "${E.supertag}".`))}for(const L of d){const y=p.find($=>$.name===L.name);L.modifier!=="-"&&y&&k.push(`"${L.name}" (of supertag "${L.supertag}") is blocked by "${y.group}" in preferences.`);const E=d.find($=>$.supertag!==L.supertag&&$.name===L.name);E&&(L.modifier==="-"&&E.modifier!=="-"&&k.push(`"${L.name}" is excluded by "${L.supertag}" but required by supertag "${E.supertag}".`),L.modifier!=="-"&&E.modifier==="-"&&k.push(`"${L.name}" is required by "${L.supertag}" but excluded by supertag "${E.supertag}".`))}return k},c=()=>{Xe.reset(),Ke.reset(),a("sortfilterupdate")},u=()=>{Qe.reset(),et.reset()};return s.$$.update=()=>{s.$$.dirty&28&&n(0,t=i(r,o,l))},[t,a,l,o,r,c,u]}class or extends se{constructor(e){super(),le(this,e,rr,lr,ne,{})}}function Ut(s,e,n){const t=s.slice();return t[11]=e[n],t}function Gt(s){let e,n;return e=new os({props:{tag:s[11]}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.tag=t[11]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function ir(s){let e;return{c(){e=x("Create supertag")},l(n){e=ee(n,"Create supertag")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function ar(s){let e,n,t="Create Supertag",l,o,r,a,i,c="Name",u,f,_,v,d,p="Description",k,L,y,E,$,b="Tags",w,R,T,P,q,J,fe,pe,ue=be(s[3]),Y=[];for(let U=0;U<ue.length;U+=1)Y[U]=Gt(Ut(s,ue,U));const te=U=>D(Y[U],1,1,()=>{Y[U]=null});return q=new Ue({props:{title:s[4]?"Click to create supertag":"Enter a valid name to continue",disabled:!s[4],$$slots:{default:[ir]},$$scope:{ctx:s}}}),q.$on("click",s[9]),{c(){e=C("section"),n=C("h3"),n.textContent=t,l=j(),o=C("button"),r=j(),a=C("div"),i=C("label"),i.textContent=c,u=j(),f=C("input"),_=j(),v=C("div"),d=C("label"),d.textContent=p,k=j(),L=C("input"),y=j(),E=C("div"),$=C("span"),$.textContent=b,w=j(),R=C("ol");for(let U=0;U<Y.length;U+=1)Y[U].c();T=j(),P=C("div"),O(q.$$.fragment),this.h()},l(U){e=I(U,"SECTION",{class:!0});var W=A(e);n=I(W,"H3",{"data-svelte-h":!0}),ae(n)!=="svelte-ho1cwx"&&(n.textContent=t),l=N(W),o=I(W,"BUTTON",{type:!0,class:!0}),A(o).forEach(m),r=N(W),a=I(W,"DIV",{class:!0});var oe=A(a);i=I(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(i)!=="svelte-10k8a68"&&(i.textContent=c),u=N(oe),f=I(oe,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),oe.forEach(m),_=N(W),v=I(W,"DIV",{class:!0});var Q=A(v);d=I(Q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(d)!=="svelte-14n9kp6"&&(d.textContent=p),k=N(Q),L=I(Q,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),Q.forEach(m),y=N(W),E=I(W,"DIV",{class:!0});var ke=A(E);$=I(ke,"SPAN",{class:!0,"data-svelte-h":!0}),ae($)!=="svelte-7hjyox"&&($.textContent=b),w=N(ke),R=I(ke,"OL",{class:!0});var we=A(R);for(let Ee=0;Ee<Y.length;Ee+=1)Y[Ee].l(we);we.forEach(m),ke.forEach(m),T=N(W),P=I(W,"DIV",{class:!0});var ve=A(P);V(q.$$.fragment,ve),ve.forEach(m),W.forEach(m),this.h()},h(){g(o,"type","button"),g(o,"class","codicon codicon-close svelte-1x6vc81"),g(i,"for","supertag-name"),g(i,"class","svelte-1x6vc81"),g(f,"type","text"),g(f,"placeholder","Descriptive name"),g(f,"id","supertag-name"),g(f,"class","svelte-1x6vc81"),g(a,"class","svelte-1x6vc81"),g(d,"for","supertag-description"),g(d,"class","svelte-1x6vc81"),g(L,"type","text"),g(L,"placeholder","Short description"),g(L,"id","supertag-description"),g(L,"class","svelte-1x6vc81"),g(v,"class","svelte-1x6vc81"),g($,"class","svelte-1x6vc81"),g(R,"class","svelte-1x6vc81"),g(E,"class","svelte-1x6vc81"),g(P,"class","last svelte-1x6vc81"),g(e,"class","svelte-1x6vc81")},m(U,W){F(U,e,W),h(e,n),h(e,l),h(e,o),h(e,r),h(e,a),h(a,i),h(a,u),h(a,f),We(f,s[0]),h(e,_),h(e,v),h(v,d),h(v,k),h(v,L),We(L,s[2]),h(e,y),h(e,E),h(E,$),h(E,w),h(E,R);for(let oe=0;oe<Y.length;oe+=1)Y[oe]&&Y[oe].m(R,null);h(e,T),h(e,P),B(q,P,null),J=!0,fe||(pe=[X(o,"click",s[6]),X(f,"input",s[7]),X(L,"input",s[8])],fe=!0)},p(U,W){if(W&1&&f.value!==U[0]&&We(f,U[0]),W&4&&L.value!==U[2]&&We(L,U[2]),W&8){ue=be(U[3]);let Q;for(Q=0;Q<ue.length;Q+=1){const ke=Ut(U,ue,Q);Y[Q]?(Y[Q].p(ke,W),S(Y[Q],1)):(Y[Q]=Gt(ke),Y[Q].c(),S(Y[Q],1),Y[Q].m(R,null))}for(_e(),Q=ue.length;Q<Y.length;Q+=1)te(Q);ge()}const oe={};W&16&&(oe.title=U[4]?"Click to create supertag":"Enter a valid name to continue"),W&16&&(oe.disabled=!U[4]),W&16384&&(oe.$$scope={dirty:W,ctx:U}),q.$set(oe)},i(U){if(!J){for(let W=0;W<ue.length;W+=1)S(Y[W]);S(q.$$.fragment,U),J=!0}},o(U){Y=Y.filter(Boolean);for(let W=0;W<Y.length;W+=1)D(Y[W]);D(q.$$.fragment,U),J=!1},d(U){U&&m(e),Ye(Y,U),M(q),fe=!1,Ze(pe)}}}function cr(s){let e,n,t;function l(r){s[10](r)}let o={$$slots:{default:[ar]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.dialog=s[1]),e=new Qt({props:o}),he.push(()=>Ne(e,"dialog",l)),e.$on("close",s[6]),{c(){O(e.$$.fragment)},l(r){V(e.$$.fragment,r)},m(r,a){B(e,r,a),t=!0},p(r,[a]){const i={};a&16413&&(i.$$scope={dirty:a,ctx:r}),!n&&a&2&&(n=!0,i.dialog=r[1],je(()=>n=!1)),e.$set(i)},i(r){t||(S(e.$$.fragment,r),t=!0)},o(r){D(e.$$.fragment,r),t=!1},d(r){M(e,r)}}}function ur(s,e,n){let t,{dialog:l}=e,{name:o=""}=e,{description:r=""}=e,{tags:a}=e;const i=Ve(),c=()=>l.close();function u(){o=this.value,n(0,o)}function f(){r=this.value,n(2,r)}const _=()=>{i("submit",{name:o,description:r,tags:a.map(({modifier:d,name:p})=>({modifier:d,name:p}))}),c()};function v(d){l=d,n(1,l)}return s.$$set=d=>{"dialog"in d&&n(1,l=d.dialog),"name"in d&&n(0,o=d.name),"description"in d&&n(2,r=d.description),"tags"in d&&n(3,a=d.tags)},s.$$.update=()=>{s.$$.dirty&9&&n(4,t=typeof o=="string"&&o!==""&&a.length>1)},[o,l,r,a,t,i,c,u,f,_,v]}class fr extends se{constructor(e){super(),le(this,e,ur,cr,ne,{dialog:1,name:0,description:2,tags:3})}}function pr(s){let e;return{c(){e=x("Search")},l(n){e=ee(n,"Search")},m(n,t){F(n,e,t)},i:K,o:K,d(n){n&&m(e)}}}function dr(s){let e,n;return e=new _t({}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function _r(s){let e,n,t,l;const o=[dr,pr],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Ae()},l(i){n.l(i),t=Ae()},m(i,c){r[e].m(i,c),F(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),D(r[u],1,1,()=>{r[u]=null}),ge(),n=r[e],n||(n=r[e]=o[e](i),n.c()),S(n,1),n.m(t.parentNode,t))},i(i){l||(S(n),l=!0)},o(i){D(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function gr(s){let e,n,t,l,o,r,a,i,c,u,f,_;n=new ns({}),l=new ls({props:{placeholder:"Search for tags",fetchSuggestions:s[8]}}),l.$on("pick",s[9]),r=new Ue({props:{id:"btn-search",title:"Search with the tags above",$$slots:{default:[_r]},$$scope:{ctx:s}}}),r.$on("click",s[7]),i=new ss({props:{tags:[...s[5],...s[6]]}}),i.$on("click",s[10]),i.$on("contextmenu",s[11]),i.$on("createSupertag",s[12]);function v(p){s[13](p)}let d={tags:s[5]};return s[1]!==void 0&&(d.dialog=s[1]),u=new fr({props:d}),he.push(()=>Ne(u,"dialog",v)),u.$on("submit",s[14]),{c(){e=C("section"),O(n.$$.fragment),t=j(),O(l.$$.fragment),o=j(),O(r.$$.fragment),a=j(),O(i.$$.fragment),c=j(),O(u.$$.fragment),this.h()},l(p){e=I(p,"SECTION",{id:!0,class:!0});var k=A(e);V(n.$$.fragment,k),t=N(k),V(l.$$.fragment,k),o=N(k),V(r.$$.fragment,k),a=N(k),V(i.$$.fragment,k),k.forEach(m),c=N(p),V(u.$$.fragment,p),this.h()},h(){g(e,"id","search"),g(e,"class","svelte-6guf0u")},m(p,k){F(p,e,k),B(n,e,null),h(e,t),B(l,e,null),h(e,o),B(r,e,null),h(e,a),B(i,e,null),F(p,c,k),B(u,p,k),_=!0},p(p,[k]){const L={};k&262145&&(L.$$scope={dirty:k,ctx:p}),r.$set(L);const y={};k&96&&(y.tags=[...p[5],...p[6]]),i.$set(y);const E={};k&32&&(E.tags=p[5]),!f&&k&2&&(f=!0,E.dialog=p[1],je(()=>f=!1)),u.$set(E)},i(p){_||(S(n.$$.fragment,p),S(l.$$.fragment,p),S(r.$$.fragment,p),S(i.$$.fragment,p),S(u.$$.fragment,p),_=!0)},o(p){D(n.$$.fragment,p),D(l.$$.fragment,p),D(r.$$.fragment,p),D(i.$$.fragment,p),D(u.$$.fragment,p),_=!1},d(p){p&&(m(e),m(c)),M(n),M(l),M(r),M(i),M(u,p)}}}function mr(s,e,n){let t,l,o,r,a,i;Z(s,Je,b=>n(15,t=b)),Z(s,vt,b=>n(2,l=b)),Z(s,rn,b=>n(3,o=b)),Z(s,on,b=>n(4,r=b)),Z(s,Qe,b=>n(5,a=b)),Z(s,et,b=>n(6,i=b));const c=Ve(),u=()=>c("submit");let{loading:f}=e,_;const v=async b=>{const w=await Xn(b);return[...l.items.filter(({name:T})=>T.toLowerCase().includes(b.toLowerCase())).map(T=>({label:T.name,count:T.tags.length,type:"supertag"})),...w]},d=b=>{var w,R;(b.key==="/"||b.key==="s")&&(!document.activeElement||document.activeElement===document.body)&&(b.preventDefault(),b.stopPropagation(),(w=document.getElementById("searchbar"))==null||w.focus()),b.ctrlKey&&b.key==="Enter"&&(b.preventDefault(),b.stopPropagation(),u()),b.ctrlKey&&b.key==="m"&&(b.preventDefault(),b.stopPropagation(),(R=document.getElementById("select-modifier"))==null||R.click())};tt(async()=>{document.addEventListener("keydown",d),t.postCount===0&&u()}),nt(()=>{document.removeEventListener("keydown",d)});const p=async b=>{const w=b.detail;if(w.type==="supertag"){const R=l.items.find(T=>T.name===w.label);if(!R){console.warn("Supertag not present.");return}et.addOrReplace(R)}else{const R=await xn(b.detail.label,o,r);Qe.addOrReplace({name:b.detail.label,modifier:b.detail.modifier,count:b.detail.count,type:(R==null?void 0:R.type)??"tag"})}},k=b=>"description"in b.detail?et.removeByName(b.detail.name):Qe.removeByName(b.detail.name),L=b=>{"description"in b.detail||(b.detail.modifier=rs(b.detail.modifier),Qe.addOrReplace(b.detail))},y=()=>{_.showModal(),Yt("dialog")};function E(b){_=b,n(1,_)}const $=b=>vt.add(b.detail);return s.$$set=b=>{"loading"in b&&n(0,f=b.loading)},[f,_,l,o,r,a,i,u,v,p,k,L,y,E,$]}class hr extends se{constructor(e){super(),le(this,e,mr,gr,ne,{loading:0})}}const{document:dt}=Sn;function vr(s){let e,n,t,l,o,r;const a=[kr,br],i=[];function c(u,f){return u[2].postCount===0?0:1}return n=c(s),t=i[n]=a[n](s),o=new es({}),{c(){e=C("section"),t.c(),l=j(),O(o.$$.fragment),this.h()},l(u){e=I(u,"SECTION",{class:!0});var f=A(e);t.l(f),f.forEach(m),l=N(u),V(o.$$.fragment,u),this.h()},h(){g(e,"class","svelte-191tm1j")},m(u,f){F(u,e,f),i[n].m(e,null),F(u,l,f),B(o,u,f),r=!0},p(u,f){let _=n;n=c(u),n===_?i[n].p(u,f):(_e(),D(i[_],1,1,()=>{i[_]=null}),ge(),t=i[n],t?t.p(u,f):(t=i[n]=a[n](u),t.c()),S(t,1),t.m(e,null))},i(u){r||(S(t),S(o.$$.fragment,u),r=!0)},o(u){D(t),D(o.$$.fragment,u),r=!1},d(u){u&&(m(e),m(l)),i[n].d(),M(o,u)}}}function $r(s){let e,n;return e=new cs({props:{error:s[1]}}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.error=t[1]),e.$set(o)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function br(s){let e,n,t,l,o,r;e=new xl({}),e.$on("sortfilterupdate",s[4]),e.$on("endreached",s[5]);const a=[yr,wr],i=[];function c(u,f){return u[2].posts.length===u[2].postCount?0:1}return t=c(s),l=i[t]=a[t](s),{c(){O(e.$$.fragment),n=j(),l.c(),o=Ae()},l(u){V(e.$$.fragment,u),n=N(u),l.l(u),o=Ae()},m(u,f){B(e,u,f),F(u,n,f),i[t].m(u,f),F(u,o,f),r=!0},p(u,f){let _=t;t=c(u),t===_?i[t].p(u,f):(_e(),D(i[_],1,1,()=>{i[_]=null}),ge(),l=i[t],l?l.p(u,f):(l=i[t]=a[t](u),l.c()),S(l,1),l.m(o.parentNode,o))},i(u){r||(S(e.$$.fragment,u),S(l),r=!0)},o(u){D(e.$$.fragment,u),D(l),r=!1},d(u){u&&(m(n),m(o)),M(e,u),i[t].d(u)}}}function kr(s){let e,n;return e=new or({}),e.$on("sortfilterupdate",s[4]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p:K,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function wr(s){let e,n,t,l;return e=new fn({props:{absoluteTop:void 0,rootMargin:1e3/Number(s[3])+"px"}}),e.$on("intersection",s[5]),t=new Ue({props:{title:"Load more posts",$$slots:{default:[Cr]},$$scope:{ctx:s}}}),t.$on("click",s[5]),{c(){O(e.$$.fragment),n=j(),O(t.$$.fragment)},l(o){V(e.$$.fragment,o),n=N(o),V(t.$$.fragment,o)},m(o,r){B(e,o,r),F(o,n,r),B(t,o,r),l=!0},p(o,r){const a={};r&8&&(a.rootMargin=1e3/Number(o[3])+"px"),e.$set(a);const i={};r&131073&&(i.$$scope={dirty:r,ctx:o}),t.$set(i)},i(o){l||(S(e.$$.fragment,o),S(t.$$.fragment,o),l=!0)},o(o){D(e.$$.fragment,o),D(t.$$.fragment,o),l=!1},d(o){o&&m(n),M(e,o),M(t,o)}}}function yr(s){let e,n;return e=new _s({}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},p:K,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Er(s){let e;return{c(){e=x("Load more")},l(n){e=ee(n,"Load more")},m(n,t){F(n,e,t)},i:K,o:K,d(n){n&&m(e)}}}function Sr(s){let e,n;return e=new _t({}),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){B(e,t,l),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Cr(s){let e,n,t,l;const o=[Sr,Er],r=[];function a(i,c){return i[0]?0:1}return e=a(s),n=r[e]=o[e](s),{c(){n.c(),t=Ae()},l(i){n.l(i),t=Ae()},m(i,c){r[e].m(i,c),F(i,t,c),l=!0},p(i,c){let u=e;e=a(i),e!==u&&(_e(),D(r[u],1,1,()=>{r[u]=null}),ge(),n=r[e],n||(n=r[e]=o[e](i),n.c()),S(n,1),n.m(t.parentNode,t))},i(i){l||(S(n),l=!0)},o(i){D(n),l=!1},d(i){i&&m(t),r[e].d(i)}}}function Kt(s){let e;return{c(){e=C("div"),this.h()},l(n){e=I(n,"DIV",{class:!0}),A(e).forEach(m),this.h()},h(){g(e,"class","svelte-191tm1j")},m(n,t){F(n,e,t)},d(n){n&&m(e)}}}function Ir(s){let e,n,t,l=`<span>❤</span> <span>Hey, sorry for the trouble in the last few days. Everything should be back working again but we
		have some rough times ahead...</span>`,o,r,a=`<span>🆕</span> <span>If you are interested you can specify your own API key in the settings, which will improve
		performance and reliability.</span>`,i,c,u,f,_,v,d,p,k,L;c=new hr({props:{loading:s[0]}}),c.$on("submit",s[4]),f=new As({props:{loading:s[0]}}),f.$on("sortfilterupdate",s[4]);const y=[$r,vr],E=[];function $(w,R){return w[1]?0:w[2].requested?1:-1}~(v=$(s))&&(d=E[v]=y[v](s));let b=s[0]&&Kt();return{c(){e=C("meta"),n=j(),t=C("d"),t.innerHTML=l,o=j(),r=C("d"),r.innerHTML=a,i=j(),O(c.$$.fragment),u=j(),O(f.$$.fragment),_=j(),d&&d.c(),p=j(),b&&b.c(),k=Ae(),this.h()},l(w){const R=En("svelte-7jdp3v",dt.head);e=I(R,"META",{name:!0,content:!0}),R.forEach(m),n=N(w),t=I(w,"D",{class:!0,"data-svelte-h":!0}),ae(t)!=="svelte-bkkfva"&&(t.innerHTML=l),o=N(w),r=I(w,"D",{class:!0,"data-svelte-h":!0}),ae(r)!=="svelte-12vd3qq"&&(r.innerHTML=a),i=N(w),V(c.$$.fragment,w),u=N(w),V(f.$$.fragment,w),_=N(w),d&&d.l(w),p=N(w),b&&b.l(w),k=Ae(),this.h()},h(){dt.title="kurosearch - Rule34 Hentai",g(e,"name","description"),g(e,"content","Simple and powerful Rule34 browsing site with a focus on simplicity and user experience."),g(t,"class","news svelte-191tm1j"),g(r,"class","news svelte-191tm1j")},m(w,R){h(dt.head,e),F(w,n,R),F(w,t,R),F(w,o,R),F(w,r,R),F(w,i,R),B(c,w,R),F(w,u,R),B(f,w,R),F(w,_,R),~v&&E[v].m(w,R),F(w,p,R),b&&b.m(w,R),F(w,k,R),L=!0},p(w,[R]){const T={};R&1&&(T.loading=w[0]),c.$set(T);const P={};R&1&&(P.loading=w[0]),f.$set(P);let q=v;v=$(w),v===q?~v&&E[v].p(w,R):(d&&(_e(),D(E[q],1,1,()=>{E[q]=null}),ge()),~v?(d=E[v],d?d.p(w,R):(d=E[v]=y[v](w),d.c()),S(d,1),d.m(p.parentNode,p)):d=null),w[0]?b||(b=Kt(),b.c(),b.m(k.parentNode,k)):b&&(b.d(1),b=null)},i(w){L||(S(c.$$.fragment,w),S(f.$$.fragment,w),S(d),L=!0)},o(w){D(c.$$.fragment,w),D(f.$$.fragment,w),D(d),L=!1},d(w){w&&(m(n),m(t),m(o),m(r),m(i),m(u),m(_),m(p),m(k)),m(e),M(c,w),M(f,w),~v&&E[v].d(w),b&&b.d(w)}}}function Tr(s,e,n){let t,l,o,r,a,i,c,u,f;Z(s,Je,$=>n(2,t=$)),Z(s,et,$=>n(7,l=$)),Z(s,Ke,$=>n(8,o=$)),Z(s,Xe,$=>n(9,r=$)),Z(s,an,$=>n(10,a=$)),Z(s,Qe,$=>n(11,i=$)),Z(s,on,$=>n(12,c=$)),Z(s,rn,$=>n(13,u=$)),Z(s,Zt,$=>n(3,f=$)),console.log(`%ckurosearch
%cHi, if you are reading this because you are debugging or reverse-engineering, feel free to send me a DM on Discord :)`,"color:crimson;font-size:32px;","color:unset;font-size:auto;");let _=!1,v,d=0;const p=()=>new In().withApiKey(u).withUserId(c).withPid(t.pageCount).withTags(i).withBlockedContent(a).withSortProperty(r.property).withSortDirection(r.direction).withScoreValue(o.scoreValue).withScoreComparator(o.scoreComparator).withRating(o.rating).withSupertags(l),k=async $=>{if(!_){n(1,v=void 0),n(0,_=!0);try{const b=t.pageCount;await $(),ts(b).catch(()=>{})}catch(b){n(1,v=b),console.warn(b)}finally{n(0,_=!1)}}},L=async()=>{Je.reset(),d=0,k(async()=>{const[$,b]=await p().getPageAndCount();Je.addPage($,b)})},y=async()=>{k(async()=>{const $=await p().getPage();Je.addPage($)})},E=$=>{if($.ctrlKey&&$.key==="ArrowDown"){const b=document.getElementsByClassName("post-media");b[d].focus(),d=Math.min(d+1,Math.max(0,b.length-1))}$.ctrlKey&&$.key==="ArrowUp"&&(document.getElementsByClassName("post-media")[d].focus(),d=Math.max(d-1,0))};return tt(async()=>{document.addEventListener("keydown",E)}),nt(()=>{document.removeEventListener("keydown",E)}),[_,v,t,f,L,y]}class lo extends se{constructor(e){super(),le(this,e,Tr,Ir,ne,{})}}export{lo as component};
