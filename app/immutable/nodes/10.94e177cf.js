import{s as C,y as a}from"../chunks/scheduler.41e0bfa2.js";import{S as b,i as T}from"../chunks/index.e3f19884.js";import{a as i}from"../chunks/active-tags-store.8f583d8c.js";import{s as c,f as p,p as k,S as B}from"../chunks/url-parsing.4d088bc8.js";import{r as w,a as U}from"../chunks/blocking-group-data.1ec73a16.js";import{b as _}from"../chunks/blocked-content-store.2c4f3570.js";function x(e,l,r){let m,s,n,u,h;a(e,U,t=>r(0,m=t)),a(e,p,t=>r(1,s=t)),a(e,c,t=>r(2,n=t)),a(e,_,t=>r(3,u=t)),a(e,i,t=>r(4,h=t));const d=async()=>{i.reset(),c.reset(),p.reset();let t=!1;const{tags:o,sort:g,filter:S}=k(new URL(location.href).searchParams);return o&&o.length>0&&(await Promise.all(o.map(async f=>await i.addByName(f.name,f.modifier))),t=!0),g&&(c.update(g),t=!0),S&&(p.update(S),t=!0),t},y=async()=>{try{w.reset();const[t,o]=await new B().withPid(0).withTags(h).withBlockedContent(u).withSortProperty(n.property).withSortDirection(n.direction).withScoreValue(s.scoreValue).withScoreComparator(s.scoreComparator).withRating(s.rating).withSupertags(m).getPageAndCount();w.addPage(t,o)}catch(t){console.warn(t)}},P=()=>{location.href="/"};return d().then(()=>y()).then(()=>P()),[]}class F extends b{constructor(l){super(),T(this,l,x,null,C,{})}}export{F as component};
