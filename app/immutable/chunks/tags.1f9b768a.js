const a=e=>e.replaceAll("&#034;",'"').replaceAll("&#038;","&").replaceAll("&#039;","'").replaceAll("&eacute;","Ã©"),o=e=>{try{return new URL(e),!0}catch{return!1}},l=(e,t)=>{if(!o(e))throw new TypeError("Invalid URL passed to fetchAbortPrevious");if(!c(t))throw new TypeError("Invalid AbortController passed to fetchAbortPrevious");return t&&t.abort(),t=new AbortController,fetch(e,{signal:t.signal})},c=e=>e===null||e instanceof AbortController,i="https://rule34-api.netlify.app";let u=null;const f=async e=>{const t=new URL("https://api.rule34.xxx/autocomplete.php");t.searchParams.append("q",e.replaceAll(" ","_"));const s=await l(t.toString(),u);if(s.ok){const r=await s.json();if(Array.isArray(r)){if(r.length===0)throw new Error("No tags found");return r.map(p)}else throw r.message?new Error(r.message):new Error("Invalid tag suggestions received")}else throw new Error("Failed to get tag suggestions")},y=async e=>{const t=new URL(`${i}/tag-details`);t.searchParams.append("name",e);const r=await(await fetch(t.toString())).text(),n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tag")[0];return m(n.attributes)},p=e=>({label:a(e.value),count:g(e.label),type:"tag"}),g=e=>Number(e.substring(e.lastIndexOf("(")+1,e.length-1)),m=e=>{const t=e.getNamedItem("name"),s=e.getNamedItem("count"),r=e.getNamedItem("type");if(!(t===null||s===null||r===null))return{name:a(t.value),count:Number(s.value),type:h(r.value)}},h=e=>["general","artist","general","copyright","character","metadata"][Number(e)];export{i as A,y as a,l as f,f as g,o as i,a as r};
