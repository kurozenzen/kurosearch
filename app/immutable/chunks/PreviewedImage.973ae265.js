import{v as k,s as L,f as I,l as O,a as U,g as E,h as C,m as z,d as _,c as F,j as u,i as A,u as D,n as q,e as $,A as ne,y as st,H as Le,r as ge,x as T,U as le,V as ae,L as ee,w as te,k as j,O as oe,o as nt,P as lt,S as at,D as B,J as me,N as it,Q as rt,p as se,R as ot,T as de,K as pe}from"./scheduler.51196a30.js";import{h as be,u as ct}from"./await_block.dd2b1fe4.js";import{e as ie}from"./each.e59479a4.js";import{S as V,i as G,a as M,t as N,g as ce,c as ue,b as K,d as H,m as W,e as J,f as ye}from"./index.456a70cf.js";import{a as ut,u as ft,i as ht}from"./user-id-store.c896e7fb.js";import{g as ve}from"./comments.4c4a663d.js";import{L as _t}from"./LoadingAnimation.5056bbea.js";import{f as ke}from"./format-tag.7e313273.js";import{a as fe}from"./active-tags-store.b9a885b3.js";import{S as dt}from"./SimpleTag.b76dc095.js";import{b as Ve,g as gt,c as Ge,h as mt}from"./always-loop-store.47cb4d03.js";import{b as he}from"./paths.02c0abb2.js";const pt=typeof window<"u";let bt=pt?s=>requestAnimationFrame(s):k;const we=6e4,re=s=>{if(!yt(s))throw new TypeError("Invalid createdAt passed to formatCreatedAt");const e=new Date(s).getTime()/we,l=new Date().getTime()/we-e;if(l<1)return"Just now";if(l<60)return Y(l,"minute");const n=l/60;if(n<24)return Y(n,"hour");const r=n/24;if(r<7)return Y(r,"day");if(r<30.5)return Y(r/7,"week");if(r<365.25)return Y(r/30.5,"month");const a=r/365.25;return Y(a,"year")},yt=s=>(typeof s=="number"||typeof s=="string")&&new Date(s).toString()!=="Invalid Date",Y=(s,e)=>{const t=s.toFixed();return`${t} ${e}${t==="1"?"":"s"} ago`};function vt(s){let e,t,l=s[0].author+"",n,r,a,o=re(s[0].createdAt)+"",i,c,g,p=s[0].content+"",m;return{c(){e=I("div"),t=I("span"),n=O(l),r=U(),a=I("span"),i=O(o),c=U(),g=I("span"),m=O(p),this.h()},l(S){e=E(S,"DIV",{class:!0});var f=C(e);t=E(f,"SPAN",{class:!0});var P=C(t);n=z(P,l),P.forEach(_),r=F(f),a=E(f,"SPAN",{class:!0});var v=C(a);i=z(v,o),v.forEach(_),c=F(f),g=E(f,"SPAN",{class:!0});var R=C(g);m=z(R,p),R.forEach(_),f.forEach(_),this.h()},h(){u(t,"class","author svelte-bys59y"),u(a,"class","created-at svelte-bys59y"),u(g,"class","content svelte-bys59y"),u(e,"class","svelte-bys59y")},m(S,f){A(S,e,f),D(e,t),D(t,n),D(e,r),D(e,a),D(a,i),D(e,c),D(e,g),D(g,m)},p(S,[f]){f&1&&l!==(l=S[0].author+"")&&q(n,l),f&1&&o!==(o=re(S[0].createdAt)+"")&&q(i,o),f&1&&p!==(p=S[0].content+"")&&q(m,p)},i:k,o:k,d(S){S&&_(e)}}}function kt(s,e,t){let{comment:l}=e;return s.$$set=n=>{"comment"in n&&t(0,l=n.comment)},[l]}class wt extends V{constructor(e){super(),G(this,e,kt,vt,L,{comment:0})}}function Se(s,e,t){const l=s.slice();return l[4]=e[t],l}function St(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function At(s){let e,t,l,n;const r=[Et,It],a=[];function o(i,c){return i[3].length>0?0:1}return e=o(s),t=a[e]=r[e](s),{c(){t.c(),l=$()},l(i){t.l(i),l=$()},m(i,c){a[e].m(i,c),A(i,l,c),n=!0},p(i,c){let g=e;e=o(i),e===g?a[e].p(i,c):(ce(),N(a[g],1,1,()=>{a[g]=null}),ue(),t=a[e],t?t.p(i,c):(t=a[e]=r[e](i),t.c()),M(t,1),t.m(l.parentNode,l))},i(i){n||(M(t),n=!0)},o(i){N(t),n=!1},d(i){i&&_(l),a[e].d(i)}}}function It(s){let e,t="Comments for this post are not available. <br/>This can happen if comments have been deleted.";return{c(){e=I("p"),e.innerHTML=t,this.h()},l(l){e=E(l,"P",{class:!0,"data-svelte-h":!0}),st(e)!=="svelte-1f9q9vq"&&(e.innerHTML=t),this.h()},h(){u(e,"class","no-comments svelte-x6zn2h")},m(l,n){A(l,e,n)},p:k,i:k,o:k,d(l){l&&_(e)}}}function Et(s){let e,t,l=ie(s[3]),n=[];for(let a=0;a<l.length;a+=1)n[a]=Ae(Se(s,l,a));const r=a=>N(n[a],1,1,()=>{n[a]=null});return{c(){e=I("ul");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=E(a,"UL",{class:!0});var o=C(e);for(let i=0;i<n.length;i+=1)n[i].l(o);o.forEach(_),this.h()},h(){u(e,"class","comments svelte-x6zn2h")},m(a,o){A(a,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(a,o){if(o&7){l=ie(a[3]);let i;for(i=0;i<l.length;i+=1){const c=Se(a,l,i);n[i]?(n[i].p(c,o),M(n[i],1)):(n[i]=Ae(c),n[i].c(),M(n[i],1),n[i].m(e,null))}for(ce(),i=l.length;i<n.length;i+=1)r(i);ue()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)M(n[o]);t=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)N(n[o]);t=!1},d(a){a&&_(e),Le(n,a)}}}function Ae(s){let e,t;return e=new wt({props:{comment:s[4]}}),{c(){K(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const r={};n&7&&(r.comment=l[4]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Pt(s){let e,t;return e=new _t({}),{c(){K(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:k,i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){J(e,l)}}}function Tt(s){let e,t,l,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Pt,then:At,catch:St,value:3,blocks:[,,,]};return be(t=ve(s[0].id,s[1],s[2]),n),{c(){e=$(),n.block.c()},l(r){e=$(),n.block.l(r)},m(r,a){A(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(r,[a]){s=r,n.ctx=s,a&7&&t!==(t=ve(s[0].id,s[1],s[2]))&&be(t,n)||ct(n,s,a)},i(r){l||(M(n.block),l=!0)},o(r){for(let a=0;a<3;a+=1){const o=n.blocks[a];N(o)}l=!1},d(r){r&&_(e),n.block.d(r),n.token=null,n=null}}}function Dt(s,e,t){let l,n;ne(s,ut,a=>t(1,l=a)),ne(s,ft,a=>t(2,n=a));let{post:r}=e;return s.$$set=a=>{"post"in a&&t(0,r=a.post)},[r,l,n]}class ms extends V{constructor(e){super(),G(this,e,Dt,Tt,L,{post:0})}}function Rt(s){let e,t=s[0].charAt(0).toUpperCase()+"",l,n;return{c(){e=I("span"),l=O(t),this.h()},l(r){e=E(r,"SPAN",{title:!0,class:!0});var a=C(e);l=z(a,t),a.forEach(_),this.h()},h(){u(e,"title",n="Rated "+s[0]+"."),u(e,"class","svelte-1nbj6kf")},m(r,a){A(r,e,a),D(e,l)},p(r,[a]){a&1&&t!==(t=r[0].charAt(0).toUpperCase()+"")&&q(l,t),a&1&&n!==(n="Rated "+r[0]+".")&&u(e,"title",n)},i:k,o:k,d(r){r&&_(e)}}}function Ct(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class ps extends V{constructor(e){super(),G(this,e,Ct,Rt,L,{value:0})}}function Mt(s){let e,t=re(s[0])+"",l;return{c(){e=I("span"),l=O(t),this.h()},l(n){e=E(n,"SPAN",{class:!0});var r=C(e);l=z(r,t),r.forEach(_),this.h()},h(){u(e,"class","svelte-1vqihm9")},m(n,r){A(n,e,r),D(e,l)},p(n,[r]){r&1&&t!==(t=re(n[0])+"")&&q(l,t)},i:k,o:k,d(n){n&&_(e)}}}function Nt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class bs extends V{constructor(e){super(),G(this,e,Nt,Mt,L,{value:0})}}function Lt(s){let e,t=ke(s[0])+"",l;return{c(){e=I("span"),l=O(t),this.h()},l(n){e=E(n,"SPAN",{"data-testid":!0,class:!0});var r=C(e);l=z(r,t),r.forEach(_),this.h()},h(){u(e,"data-testid","score"),u(e,"class","codicon codicon-heart svelte-te86f3")},m(n,r){A(n,e,r),D(e,l)},p(n,[r]){r&1&&t!==(t=ke(n[0])+"")&&q(l,t)},i:k,o:k,d(n){n&&_(e)}}}function Vt(s,e,t){let{value:l}=e;return s.$$set=n=>{"value"in n&&t(0,l=n.value)},[l]}class ys extends V{constructor(e){super(),G(this,e,Vt,Lt,L,{value:0})}}function Ie(s){let e,t,l,n,r;return{c(){e=I("a"),t=I("i"),l=U(),n=O(s[1]),this.h()},l(a){e=E(a,"A",{href:!0,target:!0,class:!0});var o=C(e);t=E(o,"I",{class:!0}),C(t).forEach(_),l=F(o),n=z(o,s[1]),o.forEach(_),this.h()},h(){u(t,"class","codicon codicon-link"),u(e,"href",r=s[0].toString()),u(e,"target","_newtab"),u(e,"class","svelte-1orztco")},m(a,o){A(a,e,o),D(e,t),D(e,l),D(e,n)},p(a,o){o&2&&q(n,a[1]),o&1&&r!==(r=a[0].toString())&&u(e,"href",r)},d(a){a&&_(e)}}}function Gt(s){let e,t=s[0]&&Ie(s);return{c(){t&&t.c(),e=$()},l(l){t&&t.l(l),e=$()},m(l,n){t&&t.m(l,n),A(l,e,n)},p(l,[n]){l[0]?t?t.p(l,n):(t=Ie(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(l){l&&_(e),t&&t.d(l)}}}function Ot(s,e,t){let l,n,{source:r}=e;return s.$$set=a=>{"source"in a&&t(2,r=a.source)},s.$$.update=()=>{var a;s.$$.dirty&4&&t(0,l=ht(r)?new URL(r):null),s.$$.dirty&1&&t(1,n=(a=l==null?void 0:l.hostname)==null?void 0:a.replace(/^www./,""))},[l,n,r]}class vs extends V{constructor(e){super(),G(this,e,Ot,Gt,L,{source:2})}}function Ut(s){let e,t,l;return{c(){e=I("a"),t=I("i"),l=O(" File"),this.h()},l(n){e=E(n,"A",{href:!0,target:!0,class:!0});var r=C(e);t=E(r,"I",{class:!0}),C(t).forEach(_),l=z(r," File"),r.forEach(_),this.h()},h(){u(t,"class","codicon codicon-file"),u(e,"href",s[0]),u(e,"target","_newtab"),u(e,"class","svelte-1orztco")},m(n,r){A(n,e,r),D(e,t),D(e,l)},p(n,[r]){r&1&&u(e,"href",n[0])},i:k,o:k,d(n){n&&_(e)}}}function zt(s,e,t){let{url:l}=e;return s.$$set=n=>{"url"in n&&t(0,l=n.url)},[l]}class ks extends V{constructor(e){super(),G(this,e,zt,Ut,L,{url:0})}}function Ee(s,e,t){const l=s.slice();l[4]=e[t];const n=l[1].find(function(...a){return s[3](l[4],...a)})!==void 0;return l[5]=n,l}function Pe(s){let e,t;function l(){return s[2](s[5],s[4])}return e=new dt({props:{tag:s[4],active:s[5]}}),e.$on("click",l),{c(){K(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,r){W(e,n,r),t=!0},p(n,r){s=n;const a={};r&1&&(a.tag=s[4]),r&3&&(a.active=s[5]),e.$set(a)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Ft(s){let e,t,l=ie(s[0]),n=[];for(let a=0;a<l.length;a+=1)n[a]=Pe(Ee(s,l,a));const r=a=>N(n[a],1,1,()=>{n[a]=null});return{c(){e=I("ul");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=E(a,"UL",{class:!0});var o=C(e);for(let i=0;i<n.length;i+=1)n[i].l(o);o.forEach(_),this.h()},h(){u(e,"class","tags svelte-b5q4us")},m(a,o){A(a,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);t=!0},p(a,[o]){if(o&3){l=ie(a[0]);let i;for(i=0;i<l.length;i+=1){const c=Ee(a,l,i);n[i]?(n[i].p(c,o),M(n[i],1)):(n[i]=Pe(c),n[i].c(),M(n[i],1),n[i].m(e,null))}for(ce(),i=l.length;i<n.length;i+=1)r(i);ue()}},i(a){if(!t){for(let o=0;o<l.length;o+=1)M(n[o]);t=!0}},o(a){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)N(n[o]);t=!1},d(a){a&&_(e),Le(n,a)}}}function qt(s,e,t){let l;ne(s,fe,o=>t(1,l=o));let{tags:n}=e;const r=(o,i)=>o?fe.removeByName(i.name):fe.addOrReplace({...i,modifier:"+"}),a=(o,i)=>i.name===o.name;return s.$$set=o=>{"tags"in o&&t(0,n=o.tags)},[n,l,r,a]}class ws extends V{constructor(e){super(),G(this,e,qt,Ft,L,{tags:0})}}const Oe=s=>s.endsWith(".gif"),Bt=(s,e,t)=>Oe(e)?{static:t,animated:e}:{static:e,animated:s},Ue=s=>s.endsWith(".mp4")||s.endsWith(".webm"),Ss=(s,e,t)=>Ue(e)?{static:t,animated:e}:{static:e,animated:s},As=s=>s.some(e=>e.name==="loop"),Is=s=>Oe(s)||Ue(s),Te=s=>{if(typeof s!="number")throw new TypeError(`Attempted to call formatVideoTime with invalid value: ${s}`);const e=Math.floor(s),t=e%60,l=Math.floor(e/60);return`${De(l)}:${De(t)}`},De=s=>{const e=String(s),t=Math.max(0,2-e.length);return`${"0".repeat(t)}${e}`},jt=(s,e)=>s&&e?s/e:1,_e=(s,e)=>s&&e?`${s} / ${e}`:"1 / 1";function Kt(s){let e,t;return{c(){e=I("img"),this.h()},l(l){e=E(l,"IMG",{src:!0,alt:!0,width:!0,height:!0,style:!0}),this.h()},h(){te(e.src,t=s[3])||u(e,"src",t),u(e,"alt","Start GIF"),u(e,"width","16"),u(e,"height","32"),j(e,"margin-left","4px")},m(l,n){A(l,e,n)},p:k,d(l){l&&_(e)}}}function Ht(s){let e,t;return{c(){e=I("img"),this.h()},l(l){e=E(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){te(e.src,t=s[4])||u(e,"src",t),u(e,"alt","Stop GIF"),u(e,"width","16"),u(e,"height","32")},m(l,n){A(l,e,n)},p:k,d(l){l&&_(e)}}}function Wt(s){let e,t;return{c(){e=I("img"),this.h()},l(l){e=E(l,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){te(e.src,t=s[2])||u(e,"src",t),u(e,"alt","Loading GIF"),u(e,"width","16"),u(e,"height","32")},m(l,n){A(l,e,n)},p:k,d(l){l&&_(e)}}}function Jt(s){let e,t,l,n;function r(i,c){return i[1]?Wt:i[0]?Ht:Kt}let a=r(s),o=a(s);return{c(){e=I("button"),o.c(),this.h()},l(i){e=E(i,"BUTTON",{type:!0,class:!0});var c=C(e);o.l(c),c.forEach(_),this.h()},h(){u(e,"type","button"),u(e,"class",t=ge(s[5].class)+" svelte-19k2j29")},m(i,c){A(i,e,c),o.m(e,null),l||(n=T(e,"click",s[6]),l=!0)},p(i,[c]){a===(a=r(i))&&o?o.p(i,c):(o.d(1),o=a(i),o&&(o.c(),o.m(e,null))),c&32&&t!==(t=ge(i[5].class)+" svelte-19k2j29")&&u(e,"class",t)},i:k,o:k,d(i){i&&_(e),o.d(),l=!1,n()}}}function Qt(s,e,t){const l=`${he}/assets/load.svg`,n=`${he}/assets/play.svg`,r=`${he}/assets/pause.svg`;let{playing:a}=e,{loading:o}=e;function i(c){ee.call(this,s,c)}return s.$$set=c=>{t(5,e=le(le({},e),ae(c))),"playing"in c&&t(0,a=c.playing),"loading"in c&&t(1,o=c.loading)},e=ae(e),[a,o,l,n,r,e,i]}class ze extends V{constructor(e){super(),G(this,e,Qt,Jt,L,{playing:0,loading:1})}}function Re(s){let e,t,l,n=!0,r=!1,a,o,i,c=Te(s[16])+"",g,p,m,S,f,P,v,R,y;function d(){cancelAnimationFrame(a),e.paused||(a=bt(d),r=!0),s[25].call(e)}return P=new ze({props:{playing:s[5],loading:s[6],class:`center hidable ${s[13]?"hide":""}`}}),P.$on("click",s[19]),{c(){e=I("video"),o=U(),i=I("span"),g=O(c),p=U(),m=I("input"),f=U(),K(P.$$.fragment),this.h()},l(h){e=E(h,"VIDEO",{tabindex:!0,poster:!0,src:!0,preload:!0,style:!0,class:!0}),C(e).forEach(_),o=F(h),i=E(h,"SPAN",{class:!0});var w=C(i);g=z(w,c),w.forEach(_),p=F(h),m=E(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0,style:!0}),f=F(h),H(P.$$.fragment,h),this.h()},h(){u(e,"tabindex","0"),u(e,"poster",s[1]),e.loop=s[4],te(e.src,t=s[0])||u(e,"src",t),u(e,"preload","metadata"),u(e,"style",l=`aspect-ratio: ${s[2]} / ${s[3]}`),u(e,"class","svelte-5v7blo"),s[8]===void 0&&at(()=>s[26].call(e)),u(i,"class","hidable svelte-5v7blo"),B(i,"hide",s[10]),u(m,"type","range"),u(m,"min",0),u(m,"max",s[8]),u(m,"step",.0166666),u(m,"class","hidable svelte-5v7blo"),u(m,"style",S=`background-image: linear-gradient(90deg, var(--accent) ${s[14]}%, var(--background-2) ${s[14]}%);}`),B(m,"hide",s[13])},m(h,w){A(h,e,w),s[23](e),A(h,o,w),A(h,i,w),D(i,g),A(h,p,w),A(h,m,w),me(m,s[7]),A(h,f,w),W(P,h,w),v=!0,R||(y=[T(e,"play",s[24]),T(e,"pause",s[24]),T(e,"timeupdate",d),T(e,"durationchange",s[26]),T(e,"waiting",s[27]),T(e,"playing",s[28]),T(e,"pause",s[29]),T(e,"ended",s[30]),T(e,"click",s[20]),T(e,"dblclick",it(rt(s[17]))),T(m,"change",s[31]),T(m,"input",s[31])],R=!0)},p(h,w){(!v||w[0]&2)&&u(e,"poster",h[1]),(!v||w[0]&16)&&(e.loop=h[4]),(!v||w[0]&1&&!te(e.src,t=h[0]))&&u(e,"src",t),(!v||w[0]&12&&l!==(l=`aspect-ratio: ${h[2]} / ${h[3]}`))&&u(e,"style",l),w[0]&32768&&n!==(n=h[15])&&e[n?"pause":"play"](),!r&&w[0]&128&&!isNaN(h[7])&&(e.currentTime=h[7]),r=!1,(!v||w[0]&65536)&&c!==(c=Te(h[16])+"")&&q(g,c),(!v||w[0]&1024)&&B(i,"hide",h[10]),(!v||w[0]&256)&&u(m,"max",h[8]),(!v||w[0]&16384&&S!==(S=`background-image: linear-gradient(90deg, var(--accent) ${h[14]}%, var(--background-2) ${h[14]}%);}`))&&u(m,"style",S),w[0]&128&&me(m,h[7]),(!v||w[0]&8192)&&B(m,"hide",h[13]);const Q={};w[0]&32&&(Q.playing=h[5]),w[0]&64&&(Q.loading=h[6]),w[0]&8192&&(Q.class=`center hidable ${h[13]?"hide":""}`),P.$set(Q)},i(h){v||(M(P.$$.fragment,h),v=!0)},o(h){N(P.$$.fragment,h),v=!1},d(h){h&&(_(e),_(o),_(i),_(p),_(m),_(f)),s[23](null),J(P,h),R=!1,oe(y)}}}function Xt(s){let e,t,l,n,r,a=s[9]&&Re(s);return{c(){e=I("div"),a&&a.c(),this.h()},l(o){e=E(o,"DIV",{class:!0,style:!0});var i=C(e);a&&a.l(i),i.forEach(_),this.h()},h(){u(e,"class",t="post-media player "+s[21].class+" svelte-5v7blo"),j(e,"aspect-ratio",s[2]+"/"+s[3])},m(o,i){A(o,e,i),a&&a.m(e,null),s[32](e),l=!0,n||(r=[T(e,"keydown",s[18]),T(e,"click",s[22])],n=!0)},p(o,i){o[9]?a?(a.p(o,i),i[0]&512&&M(a,1)):(a=Re(o),a.c(),M(a,1),a.m(e,null)):a&&(ce(),N(a,1,1,()=>{a=null}),ue()),(!l||i[0]&2097152&&t!==(t="post-media player "+o[21].class+" svelte-5v7blo"))&&u(e,"class",t),(!l||i[0]&12)&&j(e,"aspect-ratio",o[2]+"/"+o[3])},i(o){l||(M(a),l=!0)},o(o){N(a),l=!1},d(o){o&&_(e),a&&a.d(),s[32](null),n=!1,oe(r)}}}const Ce=5;function Yt(s,e,t){let l,n,r,a,{src:o}=e,{poster:i}=e,{width:c}=e,{height:g}=e,{loop:p}=e,m,S,f=!1,P=!1,v=0,R=0,y=!1,d=!1;const h=()=>{t(7,v=Math.max(0,v-Ce))},w=()=>{t(7,v=Math.min(R,v+Ce))},Q=b=>{b.offsetX<b.target.clientWidth/2?h():w()},qe=b=>{Ve(b)||b.key==="k"?(b.preventDefault(),b.stopPropagation(),t(5,f=!f)):b.key==="ArrowLeft"||b.key==="j"?(b.preventDefault(),b.stopPropagation(),h()):(b.key==="ArrowRight"||b.key==="l")&&(b.preventDefault(),b.stopPropagation(),w())},X=new IntersectionObserver(b=>{for(const tt of b)tt.isIntersecting?t(9,y=!0):S&&(t(5,f=!1),t(6,P=!1),S.addEventListener("error",()=>{t(9,y=!1)},{once:!0}),t(12,S.src="",S))},{rootMargin:"0px"}),Be=()=>{t(5,f=!f),t(6,P=!0),t(10,d=f)},je=()=>{t(10,d=!d)};nt(()=>X==null?void 0:X.observe(m)),lt(()=>X==null?void 0:X.unobserve(m));function Ke(b){ee.call(this,s,b)}function He(b){se[b?"unshift":"push"](()=>{S=b,t(12,S)})}function We(){n=this.paused,t(15,n),t(5,f),t(9,y)}function Je(){v=this.currentTime,t(7,v)}function Qe(){R=this.duration,t(8,R)}const Xe=()=>t(6,P=!0),Ye=()=>t(6,P=!1),Ze=()=>t(6,P=!1),xe=()=>{p||(t(6,P=!1),t(5,f=!1))};function $e(){v=ot(this.value),t(7,v)}function et(b){se[b?"unshift":"push"](()=>{m=b,t(11,m)})}return s.$$set=b=>{t(21,e=le(le({},e),ae(b))),"src"in b&&t(0,o=b.src),"poster"in b&&t(1,i=b.poster),"width"in b&&t(2,c=b.width),"height"in b&&t(3,g=b.height),"loop"in b&&t(4,p=b.loop)},s.$$.update=()=>{s.$$.dirty[0]&384&&t(16,l=R-v),s.$$.dirty[0]&544&&t(5,f=y&&f),s.$$.dirty[0]&32&&t(15,n=!f),s.$$.dirty[0]&384&&t(14,r=v/R*98+1),s.$$.dirty[0]&1120&&t(13,a=f&&!P&&d)},e=ae(e),[o,i,c,g,p,f,P,v,R,y,d,m,S,a,r,n,l,Q,qe,Be,je,e,Ke,He,We,Je,Qe,Xe,Ye,Ze,xe,$e,et]}class Es extends V{constructor(e){super(),G(this,e,Yt,Xt,L,{src:0,poster:1,width:2,height:3,loop:4},null,[-1,-1])}}const Z=new IntersectionObserver(s=>{var e,t;for(const l of s)if(l.isIntersecting){const n=l.target.getAttribute("data-src")??"";(e=l==null?void 0:l.target)==null||e.setAttribute("src",n)}else(t=l==null?void 0:l.target)==null||t.setAttribute("src","https://unload")},{rootMargin:"1250px"}),Fe=s=>(Z==null||Z.observe(s),{destroy(){Z==null||Z.unobserve(s)}});function Me(s){let e,t,l;return{c(){e=I("img"),this.h()},l(n){e=E(n,"IMG",{"data-src":!0,loading:!0,alt:!0,class:!0}),this.h()},h(){u(e,"data-src",s[3]),u(e,"loading","lazy"),u(e,"alt","animated source preload"),u(e,"class","animated-preload svelte-12psnhd")},m(n,r){A(n,e,r),t||(l=de(Fe.call(null,e)),t=!0)},p(n,r){r&8&&u(e,"data-src",n[3])},d(n){n&&_(e),t=!1,l()}}}function Zt(s){let e,t,l,n,r,a,o,i,c,g,p,m,S,f=s[6]&&Me(s);function P(y){s[13](y)}function v(y){s[14](y)}let R={class:"center"};return s[2]!==void 0&&(R.playing=s[2]),s[4]!==void 0&&(R.loading=s[4]),i=new ze({props:R}),se.push(()=>ye(i,"playing",P)),se.push(()=>ye(i,"loading",v)),i.$on("click",s[15]),{c(){e=I("div"),t=I("img"),a=U(),f&&f.c(),o=U(),K(i.$$.fragment),this.h()},l(y){e=E(y,"DIV",{class:!0,style:!0});var d=C(e);t=E(d,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),a=F(d),f&&f.l(d),o=F(d),H(i.$$.fragment,d),d.forEach(_),this.h()},h(){u(t,"class","post-media media-img svelte-12psnhd"),u(t,"loading","lazy"),u(t,"data-src",s[5]),u(t,"alt",l=s[0].id.toString()),u(t,"width",n=s[0].width),u(t,"height",r=s[0].height),u(t,"tabindex","0"),u(e,"class","container svelte-12psnhd"),j(e,"aspect-ratio",_e(s[0].width,s[0].height))},m(y,d){A(y,e,d),D(e,t),s[10](t),D(e,a),f&&f.m(e,null),D(e,o),W(i,e,null),p=!0,m||(S=[T(t,"click",s[9]),T(t,"keydown",s[11]),T(t,"load",s[12]),de(Fe.call(null,t))],m=!0)},p(y,[d]){(!p||d&32)&&u(t,"data-src",y[5]),(!p||d&1&&l!==(l=y[0].id.toString()))&&u(t,"alt",l),(!p||d&1&&n!==(n=y[0].width))&&u(t,"width",n),(!p||d&1&&r!==(r=y[0].height))&&u(t,"height",r),y[6]?f?f.p(y,d):(f=Me(y),f.c(),f.m(e,o)):f&&(f.d(1),f=null);const h={};!c&&d&4&&(c=!0,h.playing=y[2],pe(()=>c=!1)),!g&&d&16&&(g=!0,h.loading=y[4],pe(()=>g=!1)),i.$set(h),(!p||d&1)&&j(e,"aspect-ratio",_e(y[0].width,y[0].height))},i(y){p||(M(i.$$.fragment,y),p=!0)},o(y){N(i.$$.fragment,y),p=!1},d(y){y&&_(e),s[10](null),f&&f.d(),J(i),m=!1,oe(S)}}}function xt(s,e,t){let l,n,r,a,o;ne(s,gt,d=>t(6,o=d));let{post:i}=e,c,g=!1,p=!1;function m(d){ee.call(this,s,d)}function S(d){se[d?"unshift":"push"](()=>{c=d,t(1,c),t(2,g),t(3,n),t(7,r),t(8,l),t(0,i)})}const f=d=>{Ge(d),Ve(d)&&(d.preventDefault(),t(4,p=!0),t(2,g=!g))},P=()=>t(4,p=!1);function v(d){g=d,t(2,g)}function R(d){p=d,t(4,p)}const y=()=>{t(4,p=!0),t(2,g=!g)};return s.$$set=d=>{"post"in d&&t(0,i=d.post)},s.$$.update=()=>{s.$$.dirty&1&&t(8,l=Bt(i.file_url,i.sample_url,i.preview_url)),s.$$.dirty&256&&t(3,n=l.animated),s.$$.dirty&256&&t(7,r=l.static),s.$$.dirty&140&&t(5,a=g?n:r),s.$$.dirty&142&&c&&t(1,c.src=g?n:r,c)},[i,c,g,n,p,a,o,r,l,m,S,f,P,v,R,y]}class Ps extends V{constructor(e){super(),G(this,e,xt,Zt,L,{post:0})}}const x=new IntersectionObserver(s=>{var e,t;for(const l of s)if(l.isIntersecting){const n=l.target.getAttribute("data-src")??"";if((l.target.getAttribute("src")??"")===n)return;(e=l==null?void 0:l.target)==null||e.setAttribute("src",n)}else(t=l==null?void 0:l.target)==null||t.setAttribute("src","https://unload")},{rootMargin:"1250px"}),$t=s=>(x==null||x.observe(s),{destroy(){x==null||x.unobserve(s)}});function es(s){let e,t,l;return{c(){e=I("img"),this.h()},l(n){e=E(n,"IMG",{class:!0,loading:!0,"data-src":!0,alt:!0,width:!0,height:!0,tabindex:!0}),this.h()},h(){u(e,"class","post-media svelte-1s97xbu"),u(e,"loading","lazy"),u(e,"data-src",s[0]),u(e,"alt",s[1]),u(e,"width",s[2]),u(e,"height",s[3]),u(e,"tabindex","0")},m(n,r){A(n,e,r),t||(l=[T(e,"click",s[4]),T(e,"load",s[5]),T(e,"keydown",Ge),de($t.call(null,e))],t=!0)},p(n,[r]){r&1&&u(e,"data-src",n[0]),r&2&&u(e,"alt",n[1]),r&4&&u(e,"width",n[2]),r&8&&u(e,"height",n[3])},i:k,o:k,d(n){n&&_(e),t=!1,oe(l)}}}function ts(s,e,t){let{src:l}=e,{alt:n}=e,{width:r}=e,{height:a}=e;function o(c){ee.call(this,s,c)}function i(c){ee.call(this,s,c)}return s.$$set=c=>{"src"in c&&t(0,l=c.src),"alt"in c&&t(1,n=c.alt),"width"in c&&t(2,r=c.width),"height"in c&&t(3,a=c.height)},[l,n,r,a,o,i]}class Ne extends V{constructor(e){super(),G(this,e,ts,es,L,{src:0,alt:1,width:2,height:3})}}function ss(s){let e,t,l,n,r,a,o;return t=new Ne({props:{src:s[5],alt:s[3],width:s[0].width,height:s[0].height}}),n=new Ne({props:{src:s[4],alt:s[3],width:s[0].width,height:s[0].height}}),{c(){e=I("div"),K(t.$$.fragment),l=U(),K(n.$$.fragment),this.h()},l(i){e=E(i,"DIV",{style:!0,class:!0});var c=C(e);H(t.$$.fragment,c),l=F(c),H(n.$$.fragment,c),c.forEach(_),this.h()},h(){j(e,"aspect-ratio",s[1]),u(e,"class","svelte-1c0gugi"),B(e,"expandable",s[2]),B(e,"open",s[6])},m(i,c){A(i,e,c),W(t,e,null),D(e,l),W(n,e,null),r=!0,a||(o=T(e,"click",s[8]),a=!0)},p(i,[c]){const g={};c&32&&(g.src=i[5]),c&8&&(g.alt=i[3]),c&1&&(g.width=i[0].width),c&1&&(g.height=i[0].height),t.$set(g);const p={};c&16&&(p.src=i[4]),c&8&&(p.alt=i[3]),c&1&&(p.width=i[0].width),c&1&&(p.height=i[0].height),n.$set(p),(!r||c&2)&&j(e,"aspect-ratio",i[1]),(!r||c&4)&&B(e,"expandable",i[2])},i(i){r||(M(t.$$.fragment,i),M(n.$$.fragment,i),r=!0)},o(i){N(t.$$.fragment,i),N(n.$$.fragment,i),r=!1},d(i){i&&_(e),J(t),J(n),a=!1,o()}}}function ns(s,e,t){let l,n,r,a,o,i,{post:c}=e,g;function p(m){ee.call(this,s,m)}return s.$$set=m=>{"post"in m&&t(0,c=m.post)},s.$$.update=()=>{s.$$.dirty&1&&t(5,l=c.preview_url),s.$$.dirty&1&&t(4,n=mt?c.file_url:c.sample_url),s.$$.dirty&1&&t(3,r=c.id.toString()),s.$$.dirty&1&&t(7,a=jt(c.width,c.height)),s.$$.dirty&128&&t(2,o=a<.33),s.$$.dirty&1&&t(1,i=_e(c.width,c.height))},[c,i,o,r,n,l,g,a,p]}class Ts extends V{constructor(e){super(),G(this,e,ns,ss,L,{post:0})}}export{ms as C,vs as E,Ps as G,ws as P,ps as R,ys as S,Es as V,bs as a,ks as b,Bt as c,jt as d,As as e,Te as f,Ss as g,Ts as h,Is as i,bt as r};
